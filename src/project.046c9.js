window.__require=function t(e,i,o){function n(a,s){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}}var p=i[a]={exports:{}};e[a][0].call(p.exports,function(t){return n(e[a][1][t]||t)},p,p.exports,t,e,i,o)}return i[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(t,e,i){"use strict";var o=this&&this.__awaiter||function(t,e,i,o){function n(t){return t instanceof i?t:new i(function(e){e(t)})}return new(i||(i=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):n(t.value).then(a,s)}c((o=o.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=function(){return function(t){this.balance=t,this.assetCode="BSV",this.assetName="BSV"}}();i.BalanceInfo=r;var a=function(){function t(){this.g_cachedBetHistory=[]}return t.prototype.getBalance=function(){return o(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.sendMessage("getBalance",null)];case 1:return[2,t.sent()]}})})},t.prototype.getBetConfiguration=function(){return o(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.sendMessage("getBetConfig",null)];case 1:return[2,t.sent()]}})})},t.prototype.placeBet=function(t){return o(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return t.b.length>0?[4,this.sendMessage("placeBet",t)]:[3,2];case 1:return[2,e.sent().confirm];case 2:return[2,!1]}})})},t.prototype.getHistory=function(t){return o(this,void 0,void 0,function(){var e;return n(this,function(i){switch(i.label){case 0:return!t&&this.g_cachedBetHistory.length>0?[2,this.g_cachedBetHistory]:[4,this.sendMessage("getHistory",null)];case 1:return e=i.sent(),this.g_cachedBetHistory=e,[2,e]}})})},t.prototype.saveFavoriteBets=function(t){t.length>0&&this.sendMessage("saveFavoriteBets",t)},t.prototype.getFavoriteBets=function(){return o(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.sendMessage("getFavoriteBets",null)];case 1:return[2,t.sent()]}})})},t.prototype.saveGameState=function(t){t&&this.sendMessage("saveGameState",t)},t.prototype.getGameState=function(){return o(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.sendMessage("getGameState",null)];case 1:return[2,t.sent()]}})})},t.prototype.clearGameState=function(){this.sendMessage("clearGameState",{})},t.prototype.launchURL=function(t){this.sendMessage("launchURL",t)},t.prototype.exitGame=function(){return o(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.sendMessage("exitGame",null)];case 1:return t.sent(),[2]}})})},t.prototype.normalizeDate=function(t){var e;return e=parseInt(t),t<=1e12&&(e*=1e3),e},t.prototype.sendMessage=function(t,e){return new Promise(function(i,o){var n={};n.data=e,n.resolve=i,n.reject=o;var r=new CustomEvent(t,{detail:n});window.parent.document.dispatchEvent(r)})},t}();i.GameManager=a},{}],2:[function(t,e,i){"use strict";var o,n,r;Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.Ace=0]="Ace",t[t.Two=1]="Two",t[t.Three=2]="Three",t[t.Four=3]="Four",t[t.Five=4]="Five",t[t.Six=5]="Six",t[t.Seven=6]="Seven",t[t.Eight=7]="Eight",t[t.Nine=8]="Nine",t[t.Ten=9]="Ten",t[t.Jack=10]="Jack",t[t.Queen=11]="Queen",t[t.King=12]="King"}(o=i.CardsFace||(i.CardsFace={})),function(t){t[t.PlayerWin=0]="PlayerWin",t[t.BankerWin=1]="BankerWin",t[t.Tie=2]="Tie"}(n=i.GameResultType||(i.GameResultType={})),function(t){t[t.Player=0]="Player",t[t.Banker=1]="Banker",t[t.Tie=2]="Tie",t[t.PlayerPair=3]="PlayerPair",t[t.BankerPair=4]="BankerPair"}(r||(r={}));class a{constructor(){this.playerTakesThirdCard=!0,this.bankerTakesThirdCard=!0,this.playerCards=[],this.bankerCards=[],this.playerHandValue=0,this.bankerHandValue=0}}i.HandResultingCards=a;class s{constructor(){this.player=0,this.banker=0,this.tie=0,this.playerPair=0,this.bankerPair=0,this.gameResult=n.BankerWin,this.playerPairExists=!1,this.bankerPairExists=!1}}i.HandWinnings=s;i.BaccaratGameLogic=class{constructor(t){this._cardsDrawn=t,this._handResults=this.processThirdCards(),this._payouts=[1,.95,8,11,11]}setPayouts(t){if(5!==t.length)throw console.error("Attempt to set invalid payout information",t),new Error("Attempt to set invalid payout information");this._payouts=t}getHandResults(){return this._handResults}getWinnings(t){let e=new s;if(t[r.Player]>0&&t[r.Banker]>0)throw new Error("Invalid bet - cannot bet on both player and banker");const i=this.getHandValue(this._handResults.playerCards),o=this.getHandValue(this._handResults.bankerCards);return i>o?(e.gameResult=n.PlayerWin,e.player=t[r.Player]*this._payouts[r.Player]+t[r.Player]):i<o?(e.gameResult=n.BankerWin,e.banker=t[r.Banker]*this._payouts[r.Banker]+t[r.Banker]):(e.gameResult=n.Tie,e.tie=t[r.Tie]*this._payouts[r.Tie]+t[r.Tie],t[r.Player]>0?e.player=t[r.Player]:t[r.Banker]>0&&(e.banker=t[r.Banker])),this._handResults.playerCards[0]%13==this._handResults.playerCards[1]%13&&(e.playerPairExists=!0,e.playerPair=t[r.PlayerPair]*this._payouts[r.PlayerPair]+t[r.PlayerPair]),this._handResults.bankerCards[0]%13==this._handResults.bankerCards[1]%13&&(e.bankerPairExists=!0,e.bankerPair=t[r.BankerPair]*this._payouts[r.BankerPair]+t[r.BankerPair]),e}processThirdCards(){let t=-1,e=new a;e.playerTakesThirdCard=!1,e.playerCards.push(this._cardsDrawn[0]),e.playerCards.push(this._cardsDrawn[1]),e.bankerTakesThirdCard=!1,e.bankerCards.push(this._cardsDrawn[2]),e.bankerCards.push(this._cardsDrawn[3]);const i=this.getHandValue(e.playerCards);console.log(`player natural: ${i}`);const n=this.getHandValue(e.bankerCards);return console.log(`banker natural: ${n}`),8===i||9===i||8===n||9===n?(console.log("No third cards being dealt because either player or banker has a natural total of 8 or 9"),this.setHandValues(e),e):(i<8&&i>=0&&i<=5&&(e.playerTakesThirdCard=!0,e.playerCards.push(this._cardsDrawn[4]),t=e.playerCards[2]%13,console.log("player gets third card because player natural total between 0-5")),!1===e.playerTakesThirdCard?n>=0&&n<=5&&(e.bankerTakesThirdCard=!0,e.bankerCards.push(this._cardsDrawn[4]),console.log("banker gets third card because player stands and banker natural total between 0-5")):n<=2?(e.bankerTakesThirdCard=!0,e.bankerCards.push(this._cardsDrawn[5]),console.log("banker gets third card because natural total <= 2")):3===n&&t!=o.Eight?(e.bankerTakesThirdCard=!0,e.bankerCards.push(this._cardsDrawn[5]),console.log("banker gets third card because natural total is 3 and player third card not an 8")):4===n&&t>=1&&t<=6?(e.bankerTakesThirdCard=!0,e.bankerCards.push(this._cardsDrawn[5]),console.log("banker gets third card because natural total is 4 and player third card is 2,3,4,5,6 or 7")):5===n&&t>=3&&t<=6?(e.bankerTakesThirdCard=!0,e.bankerCards.push(this._cardsDrawn[5]),console.log("banker gets third card because natural total is 5 and player third card is 4,5,6 or 7")):6===n&&t>=5&&t<=6?(e.bankerTakesThirdCard=!0,e.bankerCards.push(this._cardsDrawn[5]),console.log("banker gets third card because natural total is 6 and player third card is 6 or 7")):7===n&&console.log("banker stands because natural total is 7"),this.setHandValues(e),e)}setHandValues(t){t.playerHandValue=this.getHandValue(t.playerCards),t.bankerHandValue=this.getHandValue(t.bankerCards)}getHandValue(t){let e=0;const i=t[0]%13,o=t[1]%13;let n=-1;return t.length>2&&(n=t[2]%13),i<9&&(e+=i+1),o<9&&(e+=o+1),n>=0&&n<9&&(e+=n+1),e%10}}},{}],AnyButton:[function(t,e,i){"use strict";cc._RF.push(e,"8b094cqbB1OXY7DhC9uYRuw","AnyButton");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../PalaceStation/scripts/PalaceStation"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.palaceStation=null,e}return o(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchDown,this),this.palaceStation=this.node.parent.getComponent(r.default)},e.prototype.onTouchDown=function(){this.palaceStation.dropDown()},e=n([s],e)}(cc.Component));i.AnyButton=c,cc._RF.pop()},{"../PalaceStation/scripts/PalaceStation":"PalaceStation"}],BacarratCards:[function(t,e,i){"use strict";cc._RF.push(e,"c323eMfCdJBnqQjm5pqLQOL","BacarratCards"),cc._RF.pop()},{}],BaccaratCardGroup:[function(t,e,i){"use strict";cc._RF.push(e,"f5584umcc5OipiOjsj8GOkr","BaccaratCardGroup");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../Public/scripts/Card"),a=cc._decorator,s=a.ccclass,c=a.property;(function(t){t[t.Baccarat=0]="Baccarat",t[t.BlackJack=1]="BlackJack"})(i.GameType||(i.GameType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardPrefab=null,e.cardsNode=null,e.winSprite=null,e.scoreSprite=null,e.scoreSpriteFrame=[],e.nameSprite=null,e._cards=[],e._spacing=cc.sys.windowPixelResolution.height/cc.sys.windowPixelResolution.width>1.7?110:120,e._dealSpeed=.25,e}return o(e,t),e.prototype.start=function(){this.reSet()},e.prototype.reSet=function(){for(var t in this.showWinSprite(!1),this.showResultLabel(!1),this._cards)this.cardsNode.removeChild(this._cards[t],!0);this._cards=[]},e.prototype.deal=function(t,e){var i=cc.instantiate(this.cardPrefab);i.getComponent(r.default).setCardValue(t);var o=cc.view.getVisibleSize();i.setPosition(o.width/2-this.node.x+250,this.node.y),this._cards.push(i),i.parent=this.cardsNode,i.getComponent(r.default).setFaceUp(!1);for(var n=0;n<this._cards.length-1;++n)this._cards[n].runAction(cc.moveTo(this._dealSpeed-.1,cc.v2(this.getPositionX(n),0)));var a=cc.sys.windowPixelResolution.height/cc.sys.windowPixelResolution.width>1.7?.27*this.cardsNode.width/i.width:.26*this.cardsNode.width/i.width,s=cc.callFunc(function(){i.getComponent(r.default).reveal(e,a)},this),c=cc.moveTo(this._dealSpeed,cc.v2(this.getPositionX(this._cards.length-1),0)),l=cc.sequence(c,cc.delayTime(.05),s);i.runAction(l)},e.prototype.getPositionX=function(t){var e=this._spacing-6*this._cards.length,i=-this._cards.length/2*e+e/2;return this._cards.length,i+t*e},e.prototype.showWinSprite=function(t){t?this.winSprite.runAction(cc.fadeIn(.2)):this.winSprite.opacity=0},e.prototype.showResultLabel=function(t){this.scoreSprite.active=!0},e.prototype.setResultLabel=function(t,e){this.scoreSprite.getComponent(cc.Sprite).spriteFrame=this.scoreSpriteFrame[t],this.showResultLabel(!0)},e.prototype.showNameSprite=function(t){},n([c(cc.Prefab)],e.prototype,"cardPrefab",void 0),n([c(cc.Node)],e.prototype,"cardsNode",void 0),n([c(cc.Node)],e.prototype,"winSprite",void 0),n([c(cc.Node)],e.prototype,"scoreSprite",void 0),n([c(cc.SpriteFrame)],e.prototype,"scoreSpriteFrame",void 0),n([c(cc.Node)],e.prototype,"nameSprite",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"../../Public/scripts/Card":"Card"}],BaccaratNetManager:[function(t,e,i){"use strict";cc._RF.push(e,"bfe90g4bzJC14qCak+5fHO/","BaccaratNetManager");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../Public/scripts/Card"),s=t("./Baccarat"),c=t("./HistoryList"),l=t("@bitboss/table-games-logic"),p=function(t){function e(){var e=t.call(this)||this;return e.monetarySymbol="$",e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getBalance=function(){return n(this,void 0,Promise,function(){var e;return r(this,function(i){switch(i.label){case 0:return[4,t.prototype.getBalance.call(this)];case 1:return e=i.sent(),this.monetarySymbol=e.assetCode,[2,e]}})})},e.prototype.getHistoryForUI=function(){return n(this,void 0,Promise,function(){var e,i,o,n=this;return r(this,function(r){switch(r.label){case 0:e=[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.prototype.getHistory.call(this,!0)];case 2:return i=r.sent(),console.log("baccarat history Items",i),i.forEach(function(t){var i,o,r=!0;console.log("baccarat process hist item",t);var p=new c.HistoryMsg;p.PlayBet=0,p.BankBet=0,p.PlayPairBet=0,p.BankPairBet=0,p.TieBet=0,p.resultDelay=!1,null!=t.betRequest.t&&Math.abs(t.betTime-t.betRequest.t)/1e3>=10&&(console.log("History item with delayed bet response.  Bet submit time: "+t.betRequest.t+", Response time: "+t.betTime),p.resultDelay=!0),p.PendingStatus=null==t.betResult||null==t.betResult.r||t.betResult.r.length<6,p.convertToFiat=t.betRequest.b[0].c,p.PendingStatus||(p.txid=t.betResult.txid,o=(i=new l.BaccaratGameLogic(t.betResult.r)).getHandResults());var u=[0,0,0,0,0];if(t.betRequest.b.forEach(function(t){switch(u[t.b[0]]=t.q,t.b[0]){case s.BetArea.Play:p.PlayBet=t.q;break;case s.BetArea.Bank:p.BankBet=t.q;break;case s.BetArea.PlayPair:p.PlayPairBet=t.q;break;case s.BetArea.BankPair:p.BankPairBet=t.q;break;case s.BetArea.Tie:p.TieBet=t.q;break;default:console.error("Default for setting bet area")}}),p.PendingStatus)p.PlayWin=0,p.BankWin=0,p.PlayPairWin=0,p.BankPairWin=0,p.TieWin=0;else{var h=null;try{h=i.getWinnings(u),console.log("getHistoryForUI winnings",h,u)}catch(e){console.error("Exception processing winnings for bet txid "+t.txid,e),r=!1}if(r){p.resultWin=new s.PointResult,h.gameResult===l.GameResultType.PlayerWin?p.resultWin.whichWin=s.whichWin.Play:h.gameResult===l.GameResultType.BankerWin?p.resultWin.whichWin=s.whichWin.Bank:p.resultWin.whichWin=s.whichWin.Tie,p.resultWin.isBankerPair=h.bankerPairExists,p.resultWin.isPlayerPair=h.playerPairExists,p.Date=n.toDateString(new Date(t.betTime),!0),p.PlayCard[0]=new a.CardValue,p.PlayCard[0].point=o.playerCards[0]%13,p.PlayCard[0].suit=Math.floor(o.playerCards[0]/13),p.PlayCard[1]=new a.CardValue,p.PlayCard[1].point=o.playerCards[1]%13,p.PlayCard[1].suit=Math.floor(o.playerCards[1]/13),o.playerTakesThirdCard&&(p.PlayCard[2]=new a.CardValue,p.PlayCard[2].point=o.playerCards[2]%13,p.PlayCard[2].suit=Math.floor(o.playerCards[2]/13)),p.BankCard[0]=new a.CardValue,p.BankCard[0].point=o.bankerCards[0]%13,p.BankCard[0].point=o.bankerCards[0]%13,p.BankCard[0].suit=Math.floor(o.bankerCards[0]/13),p.BankCard[1]=new a.CardValue,p.BankCard[1].point=o.bankerCards[1]%13,p.BankCard[1].suit=Math.floor(o.bankerCards[1]/13),o.bankerTakesThirdCard&&(p.BankCard[2]=new a.CardValue,p.BankCard[2].point=o.bankerCards[2]%13,p.BankCard[2].suit=Math.floor(o.bankerCards[2]/13));var d=h.player+h.banker+h.tie+h.playerPair+h.bankerPair,y=n.truncateValue(d,8),f=n.truncateValue(t.betPayout,8);y!==f&&console.warn("total win / total payout discrepancy",d,y,t.betPayout,f),p.PlayWin=h.player,p.BankWin=h.banker,p.PlayPairWin=h.playerPair,p.BankPairWin=h.bankerPair,p.TieWin=h.tie}}r&&e.push(p)}),[3,4];case 3:return o=r.sent(),console.log("Exception retrieving history",o),[2,null];case 4:return[2,e]}})})},e.prototype.getMonetarySymbol=function(){return this.monetarySymbol},e.prototype.truncateValue=function(t,e){var i=Math.pow(10,e);return Math.trunc(t*i)/i},e.prototype.submitBet=function(t){return n(this,void 0,Promise,function(){var e,i,o;return r(this,function(n){switch(n.label){case 0:for(i in console.log("sunmit bet called"),e={d:"",b:[]},t)t[i]>0&&(o={q:t[i],b:[parseInt(i)]},e.b.push(o));return[4,this.placeBet(e)];case 1:return[2,n.sent()]}})})},e.prototype.processBetResults=function(t,e){if(null==t)return null;var i,o=new s.RevMsg,n=new l.BaccaratGameLogic(t.r),r=n.getHandResults();try{i=n.getWinnings(e),console.log("processBetResults winnings",i,e)}catch(t){return void console.error("Exception processing winnings",t)}return o.PlayCard[0]=new a.CardValue,o.PlayCard[0].point=r.playerCards[0]%13,o.PlayCard[0].suit=Math.floor(r.playerCards[0]/13),o.PlayCard[1]=new a.CardValue,o.PlayCard[1].point=r.playerCards[1]%13,o.PlayCard[1].suit=Math.floor(r.playerCards[1]/13),r.playerTakesThirdCard&&(o.PlayCard[2]=new a.CardValue,o.PlayCard[2].point=r.playerCards[2]%13,o.PlayCard[2].suit=Math.floor(r.playerCards[2]/13)),o.BankCard[0]=new a.CardValue,o.BankCard[0].point=r.bankerCards[0]%13,o.BankCard[0].suit=Math.floor(r.bankerCards[0]/13),o.BankCard[1]=new a.CardValue,o.BankCard[1].point=r.bankerCards[1]%13,o.BankCard[1].suit=Math.floor(r.bankerCards[1]/13),r.bankerTakesThirdCard&&(o.BankCard[2]=new a.CardValue,o.BankCard[2].point=r.bankerCards[2]%13,o.BankCard[2].suit=Math.floor(r.bankerCards[2]/13)),o.PlayWin=i.player,o.BankWin=i.banker,o.PlayPairWin=i.playerPair,o.TieWin=i.tie,o.BankPairWin=i.bankerPair,console.log("revMsg",o),o},e.prototype.getRoadListHistory=function(){var t=new s.PointResult;t.isBankerPair=!0,t.isPlayerPair=!0,t.whichWin=s.whichWin.Bank;return[]},e.prototype.toDateString=function(t,e){return void 0===e&&(e=!1),e?t.getFullYear()+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2):t.getFullYear()+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+("0"+t.getDate()).slice(-2)+"/"+("0"+t.getHours()).slice(-2)+"/"+("0"+t.getMinutes()).slice(-2)},e}(t("@bitboss/game-integration").GameManager);i.default=p,cc._RF.pop()},{"../../Public/scripts/Card":"Card","./Baccarat":"Baccarat","./HistoryList":"HistoryList","@bitboss/game-integration":1,"@bitboss/table-games-logic":2}],Baccarat:[function(t,e,i){"use strict";cc._RF.push(e,"47913fRD01FCJVxm25n0SxW","Baccarat");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r,a,s,c=t("./BaccaratNetManager"),l=t("./WinArea"),p=t("../PalaceStation/scripts/PalaceStation1"),u=t("../PalaceStation/scripts/PalaceStation2"),h=t("../PalaceStation/scripts/PalaceStation"),d=t("./History"),y=t("./BaccaratCardGroup"),f=t("../../../Script/LanguageManager"),g=cc._decorator,C=g.ccclass,b=g.property;(function(t){t[t.Play=0]="Play",t[t.Bank=1]="Bank",t[t.Tie=2]="Tie",t[t.PlayPair=3]="PlayPair",t[t.BankPair=4]="BankPair"})(r=i.BetArea||(i.BetArea={})),function(t){t[t.Player=0]="Player",t[t.Banker=1]="Banker",t[t.Tie=2]="Tie",t[t.PlayerPair=3]="PlayerPair",t[t.BankerPair=4]="BankerPair"}(a||(a={})),function(t){t[t.Play=0]="Play",t[t.Bank=1]="Bank",t[t.Tie=2]="Tie"}(s=i.whichWin||(i.whichWin={}));var _=function(){return function(){}}();i.PointResult=_;var v=function(){return function(){this.BankCard=[],this.PlayCard=[],this.PlayWin=null,this.BankWin=null,this.PlayPairWin=null,this.TieWin=null,this.BankPairWin=null}}();i.RevMsg=v;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.top=null,e.Bottom=null,e.IdleStateScreen=null,e.PlaceStation=null,e.betLimitButton=null,e.betLimitScreen=null,e.betProcessingDelay=null,e.score=null,e.btnStart=null,e.btnCancel=null,e.btnNext=null,e.btnHistory=null,e.hint=null,e.PlayCardGroup=null,e.BankCardGroup=null,e.tieNode=null,e.winArea=null,e.palaceStation1=null,e.palaceStation2=null,e.palaceStation=null,e.historyNode=null,e.betNode=null,e.waitAnimation1=null,e.winBetSprite=null,e.betsSprite=[],e.betButton=[],e.betLabel=[],e.winBetLabel=[],e.winSpriteFrames=[],e.limitError=null,e.activityIndicator=null,e.totalMaxBet=0,e._myScore=0,e._myShowScore=0,e._monetarySymbol=null,e._choiceChipIndex=null,e._tableBets=[[],[],[],[],[]],e._eachBetScore=[],e._revMsg=null,e.playerCardCount=0,e.bankerCardCount=0,e._allWin=0,e.isDealRunning=!1,e.minBet=0,e.maxBet=0,e.isCoinAnimation=!1,e.isBetPlacedOnPlayer=!1,e.isBetPlacedOnBanker=!1,e.isResultPending=!1,e._betValue=[1,10,100,500,1e3],e}return o(e,t),e.prototype.onLoad=function(){var t=this;cc.view.enableAutoFullScreen(!1),cc.debug.setDisplayStats(!1);var e=cc.winSize;cc.sys.windowPixelResolution.height/cc.sys.windowPixelResolution.width>1.7?(this.node.getComponent(cc.Canvas).fitHeight=!1,this.node.getComponent(cc.Canvas).fitWidth=!0):(this.node.getComponent(cc.Canvas).fitHeight=!0,this.node.getComponent(cc.Canvas).fitWidth=!1),this.Bottom.width=e.width,this.top.width=e.width,window.document.addEventListener("betResult",function(e){return t.handleBetResultEvent(e)},!1)},e.prototype.start=function(){var t=this;this.reset(),console.log("Baccarat.ts start"),c.default.instance.getBetConfiguration().then(function(e){console.log("Baccarat.ts start config",e),t.maxBet=e.maxbet,t.minBet=e.minbet,t.totalMaxBet=e.total_maxbet,t.setBetLimitData(e),e.gameSpecific&&e.gameSpecific.chipAdjustment&&t._betValue.forEach(function(t,i,o){o[i]*=e.gameSpecific.chipAdjustment}),f.default.instance.setLanguageFromCode(e.language_code)})},e.prototype.getMinBetLimit=function(){return this.minBet},e.prototype.getMaxBetLimit=function(){return this.maxBet},e.prototype.handleBetResultEvent=function(t){if(this.isResultPending=!1,null==t.detail)return console.log("handleBetResultEvent error response (1)",t),this.waitAnimation1.node.active=!1,this.waitAnimation1.stop(),void this.reset();var e=c.default.instance.processBetResults(t.detail,this._eachBetScore);null!=e&&(console.log("handleBetResultEvent deal cards (2)"),this.waitAnimation1.node.active=!1,this.waitAnimation1.stop(),this._revMsg=e,this.isDealRunning||this.deal(0,0,!0,this),this.palaceStation.packUp())},e.prototype.setBetLimitActive=function(t){this.betLimitButton.active=!t,this.betLimitScreen.active=t,this.IdleStateScreen.active=!t,this.PlaceStation.active=!t},e.prototype.back=function(){this.historyNode.active?(this.historyNode.active=!1,this.historyNode.getComponent(d.default).clear(),this.btnHistory.interactable=!0,this.betLimitButton.active=!0):this.betLimitScreen.active?this.setBetLimitActive(!1):c.default.instance.exitGame().then(function(){})},e.prototype.reset=function(){for(var t in this.betLabel)this.betLabel[t].string="0",this.betLabel[t].node.active=!1,this.winBetLabel[t].string="",this.winBetLabel[t].node.active=!1,this._eachBetScore[t]=0;for(var t in this.hint.node.active=!0,this.btnStart.interactable=!1,this.btnStart.node.opacity=150,this.btnCancel.interactable=!1,this.btnCancel.node.opacity=150,this.tieNode.opacity=0,this._tableBets){for(var e in this._tableBets[t])this.node.removeChild(this._tableBets[t][e]),this._tableBets[t][e].opacity=0;this._tableBets[t]=[]}this._allWin=0,this.winArea.reset(),this.PlayCardGroup.reSet(),this.BankCardGroup.reSet(),this.btnStart.node.active=!0,this.btnCancel.node.active=!0,this.btnNext.node.opacity=0,this.btnNext.interactable=!1,this.playerCardCount=0,this.bankerCardCount=0,this.isBetPlacedOnPlayer=!1,this.isBetPlacedOnBanker=!1,this.PlayCardGroup.setResultLabel(0,!1),this.BankCardGroup.setResultLabel(0,!0),this.isCoinAnimation=!1,this.updateBalance()},e.prototype.updateBalance=function(){var t=this;c.default.instance.getBalance().then(function(e){e.balance<0?setTimeout(function(){t.updateBalance()},1500):(t._myScore=Number(e.balance),t._myShowScore=e.balance,t._monetarySymbol=e.assetCode,t.isCoinAnimation||t.setScore(),t.checkChipActive(),t.getPalaceStationHistory())})},e.prototype.rand=function(t,e){return Math.floor(Math.random()*(t-e+1)+e)},e.prototype.setScore=function(){var t=2,e=!1;"BSV"===this._monetarySymbol&&(e=!0,t=5);var i=this._myShowScore.toFixed(t);this.score.string=e?i+" "+this._monetarySymbol:""+this._monetarySymbol+i},e.prototype.showBetLimit=function(){this.limitError.node.stopAllActions(),this.limitError.node.opacity=0,this.setBetLimitActive(!0)},e.prototype.choiceChip=function(t,e){if(e)for(var i in this._choiceChipIndex=Number(e),this.betButton[e].node.runAction(cc.scaleTo(.1,1.2)),this.betButton)i!=e&&this.betButton[i].node.runAction(cc.scaleTo(.1,1));else for(var i in this._choiceChipIndex=null,this.betButton)this.betButton[i].node.runAction(cc.scaleTo(.1,1))},e.prototype.moveBetToTable=function(t,e){if(null!=this._choiceChipIndex&&("0"!=e||this.isBetPlacedOnBanker||(this.isBetPlacedOnPlayer=!0),"1"!=e||this.isBetPlacedOnPlayer||(this.isBetPlacedOnBanker=!0),!("1"==e&&this.isBetPlacedOnPlayer||"0"==e&&this.isBetPlacedOnBanker))){var i=Number(e),o=this._betValue[this._choiceChipIndex];if(this.limitError.node.stopAllActions(),this.limitError.node.opacity=0,o<this.betLimit[i].minbet)return this.limitError.string="Min bet limit "+this._monetarySymbol+" "+this.betLimit[i].minbet+".",void this.limitError.node.runAction(cc.sequence(cc.fadeIn(.5),cc.fadeOut(.5)).repeat(3));if(this._eachBetScore[i]+o>this.betLimit[i].maxbet)return this.limitError.string="Max bet limit "+this._monetarySymbol+" "+this.betLimit[i].maxbet+" .",void this.limitError.node.runAction(cc.sequence(cc.fadeIn(.5),cc.fadeOut(.5)).repeat(3));this.winArea.showBets(i);var n=this.betButton[this._choiceChipIndex].node.getPosition(),r=this.betLabel[i].node.convertToWorldSpaceAR(this.betLabel[i].node.getChildByName("chip").getPosition()),a=this.betNode.convertToNodeSpaceAR(r);this.betMove(this.betLabel[i].node,i,this._choiceChipIndex,n,cc.v2(a.x,a.y),.2,this.winBetLabel[i].node),this._eachBetScore[i]+=o;var s=-1!=this._eachBetScore[i].toString().indexOf(".")?this._eachBetScore[i].toFixed(2).toString():this._eachBetScore[i].toString();this.betLabel[i].string=s,this._myShowScore-=o,this.setScore(),this.checkChipActive(),this._eachBetScore.reduce(function(t,e){return t+e},0)>=this.minBet&&(this.btnStart.interactable=!0,this.btnStart.node.opacity=255),this.btnCancel.interactable=!0,this.btnCancel.node.opacity=255}},e.prototype.betMove=function(t,e,i,o,n,r,a){var s=this,c=new cc.Node,l=c.addComponent(cc.Sprite),p=1,u=null,h=null;-1!=i?(u=this.betsSprite[i],h=this.winSpriteFrames[i],p=.3):(u=this.winBetSprite,p=1),l.spriteFrame=u;var d=cc.scaleTo(r,p);this.betNode.addChild(c),c.setPosition(o);var y=cc.moveTo(r,cc.v2(n.x,n.y)),f=cc.fadeOut(.05);this.scheduleOnce(function(){c.runAction(f)},r-.05),this.scheduleOnce(function(){var i=t.getChildByName("chip");i.getComponent(cc.Sprite).spriteFrame=u,a.getChildByName("chip").getComponent(cc.Sprite).spriteFrame=h,i.setScale(new cc.Vec2(p,p)),i.opacity<=0&&(i.active=!0,i.opacity=255,s._tableBets[e].push(i)),c.destroy(),t.active=!0},r),c.runAction(cc.spawn(y,d))},e.prototype.betBack=function(t,e,i){},e.prototype.checkChipActive=function(){if(!this.isDealRunning)for(var t=this._betValue.length-1;t>=0;--t)this._myShowScore<this._betValue[t]?(Math.abs(this.maxBet-this._myShowScore)>this._betValue[t]&&(this.betButton[t].interactable=!1),this.betButton[t].node.opacity=100,this._choiceChipIndex==t&&(t>0?this.choiceChip(null,(t-1).toString()):this.choiceChip(null,null))):(this.betButton[t].node.opacity=255,this.betButton[t].interactable=!0)},e.prototype.onStartGame=function(){var t=this;console.log("On start Game has called"),this._myScore=this._myShowScore,this.waitAnimation1.node.active=!0,this.waitAnimation1.play("waitAnimation1"),this.btnStart.interactable=!1,this.btnStart.node.opacity=100,this.btnCancel.interactable=!1,this.btnCancel.node.opacity=100,this.btnHistory.interactable=!1,this.btnHistory.node.opacity=100,c.default.instance.submitBet(this._eachBetScore).then(function(e){if(console.log("placeBet response",e),t.btnStart.interactable=!0,t.btnStart.node.opacity=255,t.btnCancel.interactable=!0,t.btnCancel.node.opacity=255,t.btnHistory.interactable=!0,t.btnHistory.node.opacity=255,1==e){t.isResultPending=!0,t.playState()}else t.waitAnimation1.node.active=!1,t.waitAnimation1.stop()})},e.prototype.checkBetResultStatus=function(){this.isResultPending&&(this.waitAnimation1.node.active=!1,this.waitAnimation1.stop())},e.prototype.removeProcessingDelay=function(){this.betProcessingDelay.active=!1,this.playState(),this.reset()},e.prototype.deal=function(t,e,i,o){var n=this;this.isDealRunning=!0,this.BankCardGroup.showNameSprite(!1),this.PlayCardGroup.showNameSprite(!1),i?t<this._revMsg.PlayCard.length?(this._revMsg.PlayCard[t].point<9&&(this.playerCardCount+=this._revMsg.PlayCard[t].point+1),this.PlayCardGroup.deal(this._revMsg.PlayCard[t],function(){t++,o.scheduleOnce(function(){o.deal(t,e,!i,o)},e>=2?.5:0)}),this.scheduleOnce(function(){n.PlayCardGroup.setResultLabel(n.playerCardCount%10,!1)},.5)):o.deal(t,e,!i,o):e<this._revMsg.BankCard.length?(this._revMsg.BankCard[e].point<9&&(this.bankerCardCount+=this._revMsg.BankCard[e].point+1),this.BankCardGroup.deal(this._revMsg.BankCard[e],function(){e++,o.scheduleOnce(function(){o.deal(t,e,!i,o)},e>=2?.5:0)}),this.scheduleOnce(function(){n.BankCardGroup.setResultLabel(n.bankerCardCount%10,!0)},.5)):this.dealEnd()},e.prototype.dealEnd=function(){var t=this.getResult(),e=t[0],i=t[1],o=t[2],n=t[3],a=t[4],c=new _;c.whichWin=e,c.isBankerPair=n,c.isPlayerPair=a,c.score=t[5],this.BankCardGroup.setResultLabel(i,!0),this.PlayCardGroup.setResultLabel(o,!1),this.isCoinAnimation=!0,this.updateBalance(),this.scheduleOnce(function(){e==s.Bank?this.BankCardGroup.showWinSprite(!0):e==s.Play?this.PlayCardGroup.showWinSprite(!0):this.tieNode.runAction(cc.fadeIn(.2))},1),this.scheduleOnce(function(){c.whichWin==s.Bank&&(this.winArea.showWin(r.Bank),this._revMsg.BankWin>0&&(this._allWin+=this._revMsg.BankWin+this._eachBetScore[r.Bank])),c.whichWin==s.Play&&(this.winArea.showWin(r.Play),this._revMsg.PlayWin>0&&(this._allWin+=this._revMsg.PlayWin+this._eachBetScore[r.Play])),c.whichWin==s.Tie&&(this.winArea.showWin(r.Tie),this._revMsg.TieWin>0&&(this._allWin+=this._revMsg.TieWin+this._eachBetScore[r.Tie])),c.isBankerPair&&(this.winArea.showWin(r.BankPair),this._revMsg.BankPairWin>0&&(this._allWin+=this._revMsg.BankPairWin+this._eachBetScore[r.BankPair])),c.isPlayerPair&&(this.winArea.showWin(r.PlayPair),this._revMsg.PlayPairWin>0&&(this._allWin+=this._revMsg.PlayPairWin+this._eachBetScore[r.PlayPair])),this.setPalaceStation(c)},2),this.scheduleOnce(function(){this._revMsg.BankWin>0&&this.winBet(r.Bank,this._revMsg.BankWin),this._revMsg.PlayWin>0&&this.winBet(r.Play,this._revMsg.PlayWin),this._revMsg.TieWin>0&&this.winBet(r.Tie,this._revMsg.TieWin),this._revMsg.BankPairWin>0&&this.winBet(r.BankPair,this._revMsg.BankPairWin),this._revMsg.PlayPairWin>0&&this.winBet(r.PlayPair,this._revMsg.PlayPairWin)},4),this.scheduleOnce(function(){e!=s.Bank&&this._eachBetScore[r.Bank]>0&&this.loseBet(r.Bank,.9),e!=s.Play&&this._eachBetScore[r.Play]>0&&this.loseBet(r.Play,.9),e!=s.Tie&&this._eachBetScore[r.Tie]>0&&this.loseBet(r.Tie,.9),!a&&this._eachBetScore[r.PlayPair]>0&&this.loseBet(r.PlayPair,.9),!n&&this._eachBetScore[r.BankPair]>0&&this.loseBet(r.BankPair,.9)},3.5),this.scheduleOnce(function(){this.btnNext.node.opacity=255,this.btnNext.interactable=!0},7),this.scheduleOnce(function(){this.winArea.resetWin()},7)},e.prototype.winBet=function(t,e){var i=this,o=this.winBetLabel[t].node.getChildByName("chip");if(o.scale=.3,this.betLabel[t].node.activeInHierarchy){this.betLabel[t].node.active=!1,this.winBetLabel[t].node.active=!0;var n=cc.instantiate(o);n.name="chip2",n.setPosition(o.x,o.y+400),this.winBetLabel[t].node.addChild(n);var r=cc.sequence(cc.moveTo(.5,cc.p(o.getPosition())),cc.delayTime(.6),cc.callFunc(this.hightLightWinBet,this,t),cc.moveTo(1,cc.p(o.x,o.y-700)),cc.callFunc(this.unHighLightWinArea,this,t));r.setTag(100),n.runAction(r),this.scheduleOnce(function(){i.winBetLabel[t].string=-1!=e.toString().indexOf(".")?e.toFixed(2).toString():e.toString()},.5)}else console.log("pair pair")},e.prototype.hightLightWinBet=function(t,e){this.winBetLabel[e].node.getChildByName("chip").opacity=0,this.winBetLabel[e].string=""},e.prototype.unHighLightWinArea=function(t,e){this.winBetLabel[e].node.active=!1,this.winBetLabel[e].node.getChildByName("chip").opacity=255,this.winBetLabel[e].node.getChildByName("chip2").destroy(),this.setScore()},e.prototype.loseBet=function(t,e){var i=cc.view.getVisibleSize();this.betLabel[t].string="";var o=this.betLabel[t].node.getChildByName("chip"),n=cc.instantiate(o);n.setPosition(o.getPosition()),this.betLabel[t].node.addChild(n),o.opacity=0,n.runAction(cc.moveTo(e,cc.v2(i.width/2+300,n.y)))},e.prototype.addWinScore=function(t){this._myScore+=t;var e=10;this.schedule(function(){--e>0?this._myShowScore+=Math.floor(t/10):(this._myShowScore=this._myScore,this.endState()),this.setScore()},.05,e-1),this.updateBalance()},e.prototype.fetchBet=function(t){for(var e in this._tableBets[t]){this._tableBets[t][e].opacity=0,this.betLabel[t].string="";var i=this._tableBets[t][e].getPosition().add(this._tableBets[t][e].parent.getPosition());this.betBack(i,cc.v2(this.score.node.x,this.score.node.y+this.Bottom.y),.2)}},e.prototype.getResult=function(){var t=null,e=0,i=0,o=0;for(var n in this._revMsg.BankCard)this._revMsg.BankCard[n].point<9&&(e+=this._revMsg.BankCard[n].point+1);for(var n in this._revMsg.PlayCard)this._revMsg.PlayCard[n].point<9&&(i+=this._revMsg.PlayCard[n].point+1);(e%=10)>(i%=10)?(t=s.Bank,o=e):e<i?(t=s.Play,o=i):(t=s.Tie,o=e);var r=this.isPair(this._revMsg.PlayCard);return[t,e,i,this.isPair(this._revMsg.BankCard),r,o]},e.prototype.isPair=function(t){return t[0].point==t[1].point},e.prototype.getPalaceStationHistory=function(){var t=c.default.instance.getRoadListHistory();for(var e in t)this.setPalaceStation(t[e])},e.prototype.setPalaceStation=function(t){console.log("result to show in  playStation: ",t),this.palaceStation1.addPalaceStation(t),this.palaceStation.addPalaceStation(t)},e.prototype.onCancel=function(){this.reset()},e.prototype.onNext=function(){var t=this;for(var e in console.log("stop all action"),this.node.stopAllActions(),this.isDealRunning=!1,this.isCoinAnimation=!1,this.winBetLabel)this.winBetLabel[e].string="",this.winBetLabel[e].node.active=!1;this._revMsg.BankWin>0&&this.fetchBet(r.Bank),this._revMsg.PlayWin>0&&this.fetchBet(r.Play),this._revMsg.TieWin>0&&this.fetchBet(r.Tie),this._revMsg.BankPairWin>0&&this.fetchBet(r.BankPair),this._revMsg.PlayPairWin>0&&this.fetchBet(r.PlayPair),this.scheduleOnce(function(){this.addWinScore(this._allWin)},.2),this.scheduleOnce(function(){t.idleState()},.5)},e.prototype.idleState=function(){this.reset()},e.prototype.playState=function(){for(var t in this.hint.node.active=!1,console.log("hint scaleX",this.hint.node.scaleX),console.log("hint scaleY",this.hint.node.scaleX),this.btnStart.node.active=!1,this.btnCancel.node.active=!1,this.btnNext.node.opacity=0,this.btnNext.interactable=!1,this.choiceChip(null,null),this.betButton)this.betButton[t].interactable=!1},e.prototype.endState=function(){f.default.instance.switchLanguage(!1)},e.prototype.showHistory=function(){this.activityIndicator.active=!0,this.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(this.populateHistory,this)))},e.prototype.populateHistory=function(){this.btnHistory.interactable=!1,this.historyNode.active=!0,this.betLimitButton.active=!1,this.historyNode.getComponent(d.default).setHistorys(this),f.default.instance.switchLanguage(!1)},e.prototype.onSubmissionCancel=function(){this.hint.node.active=!0,this.btnStart.node.active=!0,this.btnCancel.node.active=!0,this.btnNext.node.opacity=255,this.btnNext.interactable=!0,this.choiceChip(null,null),this.checkChipActive()},e.prototype.setBetLimitData=function(t){var e=this;this.betLimit=[{betType:a.Player,betName:"Player",minbet:t.minbet,maxbet:t.maxbet,payout:"1:1"},{betType:a.Banker,betName:"Banker",minbet:t.minbet,maxbet:t.maxbet,payout:"1:0.95"},{betType:a.Tie,betName:"Tie",minbet:t.minbet,maxbet:t.maxbet,payout:"1:8"},{betType:a.PlayerPair,betName:"Player Pair",minbet:t.minbet,maxbet:t.maxbet,payout:"1:11"},{betType:a.BankerPair,betName:"Banker Pair",minbet:t.minbet,maxbet:t.maxbet,payout:"1:11"}],t.gameSpecific.minMaxOverrides.forEach(function(t){for(var i=0,o=e.betLimit;i<o.length;i++){var n=o[i];n.betType==t.betType&&(n.minbet=t.minbet,n.maxbet=t.maxbet)}console.log("  Overeided bet limit ",e.betLimit)})},e.prototype.removeActivityIndicator=function(){this.activityIndicator.active=!1},e.prototype.testMethod=function(){this.node.stopAllActions();for(var t=0,e=[1,10,100,500,1e3],i=[];t<=this.minBet;){var o=Math.floor(4*Math.random());i.push(o),t+=e[o],this._choiceChipIndex=o,this.moveBetToTable(null,o.toString())}console.log(" bet amount ",JSON.stringify(i)),this.onStartGame();var n=cc.sequence(cc.delayTime(15),cc.callFunc(this.onNext,this),cc.delayTime(2),cc.callFunc(this.testMethod,this),cc.delayTime(20));n.setTag(458),this.node.runAction(n)},n([b(cc.Node)],e.prototype,"top",void 0),n([b(cc.Node)],e.prototype,"Bottom",void 0),n([b(cc.Node)],e.prototype,"IdleStateScreen",void 0),n([b(cc.Node)],e.prototype,"PlaceStation",void 0),n([b(cc.Node)],e.prototype,"betLimitButton",void 0),n([b(cc.Node)],e.prototype,"betLimitScreen",void 0),n([b(cc.Node)],e.prototype,"betProcessingDelay",void 0),n([b(cc.Label)],e.prototype,"score",void 0),n([b(cc.Button)],e.prototype,"btnStart",void 0),n([b(cc.Button)],e.prototype,"btnCancel",void 0),n([b(cc.Button)],e.prototype,"btnNext",void 0),n([b(cc.Button)],e.prototype,"btnHistory",void 0),n([b(cc.Sprite)],e.prototype,"hint",void 0),n([b(y.default)],e.prototype,"PlayCardGroup",void 0),n([b(y.default)],e.prototype,"BankCardGroup",void 0),n([b(cc.Node)],e.prototype,"tieNode",void 0),n([b(l.default)],e.prototype,"winArea",void 0),n([b(p.default)],e.prototype,"palaceStation1",void 0),n([b(u.default)],e.prototype,"palaceStation2",void 0),n([b(h.default)],e.prototype,"palaceStation",void 0),n([b(cc.Node)],e.prototype,"historyNode",void 0),n([b(cc.Node)],e.prototype,"betNode",void 0),n([b(cc.Animation)],e.prototype,"waitAnimation1",void 0),n([b(cc.SpriteFrame)],e.prototype,"winBetSprite",void 0),n([b(cc.SpriteFrame)],e.prototype,"betsSprite",void 0),n([b(cc.Button)],e.prototype,"betButton",void 0),n([b(cc.Label)],e.prototype,"betLabel",void 0),n([b(cc.Label)],e.prototype,"winBetLabel",void 0),n([b(cc.SpriteFrame)],e.prototype,"winSpriteFrames",void 0),n([b(cc.Label)],e.prototype,"limitError",void 0),n([b(cc.Node)],e.prototype,"activityIndicator",void 0),e=n([C],e)}(cc.Component);i.default=S,cc._RF.pop()},{"../../../Script/LanguageManager":"LanguageManager","../PalaceStation/scripts/PalaceStation":"PalaceStation","../PalaceStation/scripts/PalaceStation1":"PalaceStation1","../PalaceStation/scripts/PalaceStation2":"PalaceStation2","./BaccaratCardGroup":"BaccaratCardGroup","./BaccaratNetManager":"BaccaratNetManager","./History":"History","./WinArea":"WinArea"}],BetLimitCell:[function(t,e,i){"use strict";cc._RF.push(e,"aee84Kk1MNJa6iuIaMzdhe0","BetLimitCell");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./BaccaratNetManager"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=null,e.min=null,e.max=null,e.payout=null,e}return o(e,t),e.prototype.setData=function(t,e,i,o){this.type.string=t,this.min.string=r.default.instance.getMonetarySymbol()+" "+e,this.max.string=r.default.instance.getMonetarySymbol()+" "+i,this.payout.string=o},n([c(cc.Label)],e.prototype,"type",void 0),n([c(cc.Label)],e.prototype,"min",void 0),n([c(cc.Label)],e.prototype,"max",void 0),n([c(cc.Label)],e.prototype,"payout",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"./BaccaratNetManager":"BaccaratNetManager"}],BetLimit:[function(t,e,i){"use strict";cc._RF.push(e,"2e634ZGutBPKIoMmgm25DIk","BetLimit");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("./BetLimitCell"),s=t("./Baccarat"),c=t("./BaccaratNetManager"),l=cc._decorator,p=l.ccclass,u=l.property;(function(t){t[t.Player=0]="Player",t[t.Banker=1]="Banker",t[t.Tie=2]="Tie",t[t.PlayerPair=3]="PlayerPair",t[t.BankerPair=4]="BankerPair"})(r||(r={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.betLimitCell=null,e.content=null,e.maxLimit=null,e}return o(e,t),e.prototype.onEnable=function(){var t=this,e=this.node.parent.getComponent(s.default).betLimit;this.content.removeAllChildren(!0),this.maxLimit.string=c.default.instance.getMonetarySymbol()+" "+this.node.parent.getComponent(s.default).totalMaxBet.toString(),e.forEach(function(e){var i=cc.instantiate(t.betLimitCell);i.getComponent(a.default).setData(e.betName,e.minbet,e.maxbet,e.payout),t.content.addChild(i)})},n([u(cc.Prefab)],e.prototype,"betLimitCell",void 0),n([u(cc.Node)],e.prototype,"content",void 0),n([u(cc.Label)],e.prototype,"maxLimit",void 0),e=n([p],e)}(cc.Component);i.default=h,cc._RF.pop()},{"./Baccarat":"Baccarat","./BaccaratNetManager":"BaccaratNetManager","./BetLimitCell":"BetLimitCell"}],BlackJackCardGroup:[function(t,e,i){"use strict";cc._RF.push(e,"d181feSCHhI+bY2voB8VODL","BlackJackCardGroup");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r,a,s=t("../../Public/scripts/Card"),c=cc._decorator,l=c.ccclass,p=c.property;(function(t){t[t.Baccarat=0]="Baccarat",t[t.BlackJack=1]="BlackJack"})(i.GameType||(i.GameType={})),function(t){t[t.None=0]="None",t[t.Banker=1]="Banker",t[t.Player=2]="Player",t[t.SplitCards1=3]="SplitCards1",t[t.SplitCards2=4]="SplitCards2",t[t.SplitCards3=5]="SplitCards3"}(r=i.CardGroupIdentity||(i.CardGroupIdentity={})),function(t){t[t.Common=0]="Common",t[t.Bust=1]="Bust",t[t.BlackJack=2]="BlackJack"}(a=i.CardGroupState||(i.CardGroupState={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PointLabel=null,e.StopCardGroup=null,e.CardsNode=null,e.BlackJackImage=null,e.BustImage=null,e._spacing=100,e._dealSpeed=.25,e.cardGroup=[],e.valueSum=0,e.regardAAs11=!1,e.bet=0,e.cardGroupState=a.Common,e.cardGroupIdentity=r.None,e.isStop=!1,e}return o(e,t),Object.defineProperty(e.prototype,"IsStop",{get:function(){return this.isStop},set:function(t){this.isStop=t,t&&this.ShowCardGroupState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CardGroupIdentity",{get:function(){return this.cardGroupIdentity},set:function(t){this.cardGroupIdentity=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CardGroupState",{get:function(){return this.cardGroupState},set:function(t){this.cardGroupState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Bet",{get:function(){return this.bet},set:function(t){this.bet=t,this.cardGroupIdentity!=r.Banker&&(this.node.getChildByName("Bet").getComponentInChildren(cc.Label).string=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ValueSum",{get:function(){return this.valueSum},set:function(t){this.valueSum=t,this.PointLabel.string=this.valueSum.toString()},enumerable:!0,configurable:!0}),e.prototype.InitializeCardGroup=function(t){for(var e in this.cardGroup=this.node.getComponentsInChildren(s.default),this.cardGroup)this.cardGroup[e].setCardValue(t[e].CardValue)},e.prototype.AddCardToCardGroup=function(t){this.cardGroup.push(t)},e.prototype.GetCard=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),t.node.setPosition(500,700+this.node.parent.y-this.node.y),this.cardGroup.push(t),t.node.parent=this.CardsNode,t.node.zIndex=-1,t.setFaceUp(!1);var o=t.CardValue;if(o.point>=10?this.ValueSum+=10:0==o.point?this.ValueSum+11<=21?(this.ValueSum+=11,this.regardAAs11=!0):this.ValueSum++:this.ValueSum+=o.point+1,this.regardAAs11&&this.ValueSum>21&&(this.ValueSum-=10,this.regardAAs11=!1),this.cardGroup.length>4)for(var n=0;n<this.cardGroup.length-1;++n)this.cardGroup[n].node.runAction(cc.moveTo(this._dealSpeed-.1,cc.v2(this.NewGetCardPositionXByCardIndex(this.cardGroup.length,n),150)));else for(n=0;n<this.cardGroup.length-1;++n)this.cardGroup[n].node.runAction(cc.moveTo(this._dealSpeed-.1,cc.v2(this.NewGetCardPositionXByCardIndex(this.cardGroup.length,n),150)));var r=cc.moveTo(this._dealSpeed,cc.v2(this.NewGetCardPositionXByCardIndex(this.cardGroup.length,this.cardGroup.length-1),150)),a=cc.callFunc(function(){e?t.reveal(function(){},1):t.scaleBackCard()},this),s=cc.sequence(r,cc.delayTime(.05),a);t.node.runAction(s),t.setCardValue(o),this.DetermineState(i)},e.prototype.DetermineState=function(t){console.log("DetermineState "+this.ValueSum),this.ValueSum>21?this.CardGroupState=a.Bust:21!=this.ValueSum||2!=this.cardGroup.length||t?(this.CardGroupState,a.Common):this.CardGroupState=a.BlackJack,console.log("this.CardGroupIdentity "+this.CardGroupIdentity),this.CardGroupIdentity!=r.Banker&&this.ShowCardGroupState()},e.prototype.ShowFirstCardAndValueSum=function(){this.cardGroupIdentity==r.Banker&&(this.cardGroup[0].reveal(function(){},1),this.PointLabel.node.parent.active=!0,this.PointLabel.node.active=!0)},e.prototype.CheckCardsIsPair=function(){return this.cardGroup[0].CardValue.point==this.cardGroup[1].CardValue.point},e.prototype.RemoveLastCard=function(){var t=this.cardGroup[1].CardValue.point>=10?9:this.cardGroup[1].CardValue.point;this.ValueSum-=t+1,this.cardGroup.pop().node.destroy(),this.cardGroup[0].node.runAction(cc.moveTo(this._dealSpeed-.1,cc.v2(this.NewGetCardPositionXByCardIndex(1,0),150)))},e.prototype.RemoveFirstCard=function(){var t=this.cardGroup[0].CardValue.point>=10?9:this.cardGroup[0].CardValue.point;this.ValueSum-=t+1,this.cardGroup.shift().node.destroy(),this.cardGroup[0].node.runAction(cc.moveTo(this._dealSpeed-.1,cc.v2(this.NewGetCardPositionXByCardIndex(1,0),150)))},e.prototype.ClearCardGroup=function(){for(var t=0;t<this.cardGroup.length;t++)this.cardGroup[t].node.destroy();this.cardGroup=[],this.valueSum=0,this.StopCardGroup.opacity=0,this.regardAAs11=!1,this.bet=0,this.IsStop=!1,this.CardGroupState=a.Common,this.BlackJackImage.opacity=0,this.BustImage.opacity=0,this.PointLabel.node.parent.active=!1},e.prototype.ShowCardGroupState=function(){this.cardGroupState==a.BlackJack?(this.BlackJackImage.opacity=255,this.BustImage.opacity=0):this.cardGroupState==a.Bust?(this.BustImage.opacity=255,this.BlackJackImage.opacity=0,console.log("inside bust image")):this.cardGroupState==a.Common&&(this.BlackJackImage.opacity=0,this.BustImage.opacity=0)},e.prototype.setFirstCard=function(t){this.cardGroup[0].setCardValue(t);var e=t;e.point>=10?this.ValueSum+=10:0==e.point?this.ValueSum+11<=21?(this.ValueSum+=11,this.regardAAs11=!0):this.ValueSum++:this.ValueSum+=e.point+1,this.regardAAs11&&this.ValueSum>21&&(this.ValueSum-=10,this.regardAAs11=!1),this.DetermineState(!1)},e.prototype.getCardGroup=function(){return this.cardGroup},e.prototype.RegardAAs11=function(t){this.regardAAs11=t},e.prototype.showStop=function(){this.StopCardGroup.opacity=255,this.PointLabel.node.parent.active=!0},e.prototype.NewGetCardPositionXByCardIndex=function(t,e,i){void 0===i&&(i=0);var o=310/t;return-t/2*o+o/2+e*o},n([p(cc.Label)],e.prototype,"PointLabel",void 0),n([p(cc.Node)],e.prototype,"StopCardGroup",void 0),n([p(cc.Node)],e.prototype,"CardsNode",void 0),n([p(cc.Node)],e.prototype,"BlackJackImage",void 0),n([p(cc.Node)],e.prototype,"BustImage",void 0),e=n([l],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../Public/scripts/Card":"Card"}],BlackJackHistoryList:[function(t,e,i){"use strict";cc._RF.push(e,"c4ffbKSYQxDw6E1NGaDdvBg","BlackJackHistoryList");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Script/LanguageManager"),a=t("./BlackJackNetManager"),s=t("./HistoryCardGroup"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(){return function(){this.CardGroup=[],this.CardGroupPoint=null,this.WinScore=null}}();i.BJHistoryCarValue=u;var h=function(){return function(){this.BankCard=[],this.PlayCard=[],this.BankPoint=null,this.InsuranceBenefit=null,this.WinScoreSum=null,this.BetSum=null,this.Date=null}}();i.BJHistoryMsg=h;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.detail=null,e.betScore=null,e.winScore=null,e.date=null,e.bankerCards=null,e.playerCards=null,e.bankerPoint=null,e.playerPoint=null,e.playerWin=null,e.cardPrefab=null,e.historyCardGroup=null,e.insuranceBenefit=null,e._moveOpen=!1,e._isContentSizeMove=!1,e._detailCloseY=45,e._detailOpenY=0,e._thisNodeCloseH=0,e._thisNodeOpenH=0,e._dropDownTime=.5,e._historyMsg=null,e._isSetHistoryMsg=!1,e}return o(e,t),e.prototype.onLoad=function(){this._detailCloseY=this.detail.y,this._detailOpenY=this._detailCloseY-this.detail.getContentSize().height,this._thisNodeCloseH=this.node.getContentSize().height,this._thisNodeOpenH=this.detail.getContentSize().height+this._thisNodeCloseH},e.prototype.update=function(t){if(this._isContentSizeMove){var e=this._thisNodeOpenH/(this._dropDownTime/t);this._moveOpen?this.node.getContentSize().height<=this._thisNodeOpenH-e?this.node.setContentSize(this.node.getContentSize().width,this.node.getContentSize().height+e):this.node.getContentSize().height<this._thisNodeOpenH&&(this.node.setContentSize(this.node.getContentSize().width,this._thisNodeOpenH),this._isContentSizeMove=!1):this.node.getContentSize().height>=this._thisNodeCloseH+e?this.node.setContentSize(this.node.getContentSize().width,this.node.getContentSize().height-e):this.node.getContentSize().height>this._thisNodeCloseH&&(this.node.setContentSize(this.node.getContentSize().width,this._thisNodeCloseH),this._isContentSizeMove=!1)}},e.prototype.show=function(){var t=this;this._isSetHistoryMsg||(this._isSetHistoryMsg=!0),this._detailOpenY=this._detailCloseY-this.detail.getContentSize().height,this._thisNodeOpenH=this.detail.getContentSize().height+this._thisNodeCloseH,this._moveOpen=!this._moveOpen,this._isContentSizeMove=!0,this.detail.stopAllActions(),this._moveOpen?(this.detail.active=!0,this.detail.runAction(cc.moveTo(this._dropDownTime-.15,cc.v2(this.detail.x,this._detailOpenY)))):(this.scheduleOnce(function(){t.detail.active=!1},this._dropDownTime-.15),this.detail.runAction(cc.moveTo(this._dropDownTime-.15,cc.v2(this.detail.x,this._detailCloseY))))},e.prototype.setHistoryMsg=function(t){this._historyMsg=t;var e=a.default.instance.getMonetarySymbol();for(var i in this.betScore.string=e+t.BetSum,this.winScore.string=e+t.WinScoreSum,this.date.string=t.Date,r.default.instance.language==r.MultiLangType.CN?(this.bankerPoint.string=t.BankPoint+" \u70b9",this.playerPoint.string=t.PlayCard[0].CardGroupPoint+" \u70b9"):(this.bankerPoint.string=t.BankPoint+" Point",this.playerPoint.string=t.PlayCard[0].CardGroupPoint+" Point"),this.playerWin.string=e+t.PlayCard[0].WinScore,t.BankCard){(o=cc.instantiate(this.cardPrefab)).getComponent("CardOLD").setCardValue(t.BankCard[i]),o.scale=.5,this.bankerCards.addChild(o)}for(var i in t.PlayCard[0].CardGroup){var o;(o=cc.instantiate(this.cardPrefab)).getComponent("CardOLD").setCardValue(t.PlayCard[0].CardGroup[i]),o.scale=.5,this.playerCards.addChild(o)}if(t.PlayCard.length>1)for(i=1;i<t.PlayCard.length;i++){var n=cc.instantiate(this.historyCardGroup);n.getComponent(s.HistoryCardGroup).setHistoryCardGroup(t.PlayCard[i]),n.setPositionx=0,this.detail.addChild(n)}if(t.InsuranceBenefit>0){var c=cc.instantiate(this.insuranceBenefit);c.getChildByName("Score").getComponent(cc.Label).string=e+t.InsuranceBenefit,this.detail.addChild(c)}},e.prototype.toThousands=function(t){for(var e="",i=0,o=(t=(t||0).toString()).length-1;o>=0;o--)i++,e=t.charAt(o)+e,i%3||0==o||(e=","+e);return e},n([p(cc.Node)],e.prototype,"detail",void 0),n([p(cc.Label)],e.prototype,"betScore",void 0),n([p(cc.Label)],e.prototype,"winScore",void 0),n([p(cc.Label)],e.prototype,"date",void 0),n([p(cc.Node)],e.prototype,"bankerCards",void 0),n([p(cc.Node)],e.prototype,"playerCards",void 0),n([p(cc.Label)],e.prototype,"bankerPoint",void 0),n([p(cc.Label)],e.prototype,"playerPoint",void 0),n([p(cc.Label)],e.prototype,"playerWin",void 0),n([p(cc.v2refab)],e.prototype,"cardPrefab",void 0),n([p(cc.v2refab)],e.prototype,"historyCardGroup",void 0),n([p(cc.v2refab)],e.prototype,"insuranceBenefit",void 0),e=n([l],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../Script/LanguageManager":"LanguageManager","./BlackJackNetManager":"BlackJackNetManager","./HistoryCardGroup":"HistoryCardGroup"}],BlackJackHistory:[function(t,e,i){"use strict";cc._RF.push(e,"14d5bzv1vlCD7iVtju6z55+","BlackJackHistory");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./BlackJackHistoryList"),a=t("./BlackJackNetManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollviewContent=null,e.historyList=null,e.scrollView=null,e.view=null,e.bar=null,e._space=135,e.historyMsg=[],e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=cc.winSize;this.scrollView.node.setContentSize(this.scrollView.node.getContentSize().width,t.height-this._space),this.view.setContentSize(this.view.getContentSize().width,t.height-this._space)},e.prototype.update=function(){},e.prototype.instantiateHistoryList=function(t,e){void 0===e&&(e=!1);var i=cc.instantiate(this.historyList);i.getComponent(r.default).setHistoryMsg(this.historyMsg[t]),this.scrollviewContent.addChild(i)},e.prototype.setHistorys=function(){this.scrollView.scrollToPercentVertical(1),this.historyMsg=a.default.instance.GetHistoryResult();for(var t=0;t<this.historyMsg.length;t++)this.instantiateHistoryList(t)},e.prototype.clear=function(){this.scrollviewContent.removeAllChildren()},n([l(cc.Node)],e.prototype,"scrollviewContent",void 0),n([l(cc.Prefab)],e.prototype,"historyList",void 0),n([l(cc.ScrollView)],e.prototype,"scrollView",void 0),n([l(cc.Node)],e.prototype,"view",void 0),n([l(cc.Node)],e.prototype,"bar",void 0),e=n([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./BlackJackHistoryList":"BlackJackHistoryList","./BlackJackNetManager":"BlackJackNetManager"}],BlackJackNetManager:[function(t,e,i){"use strict";cc._RF.push(e,"03e2b261XNBAL4JYJ06DLUG","BlackJackNetManager");var o=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../Public/scripts/Card"),a=t("../../baccarat/scripts/Baccarat"),s=t("./BlackJackHistoryList"),c=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.getMonetarySymbol=function(){return"\uffe5"},t.prototype.getScore=function(){return 1e3},t.prototype.exitGame=function(){return o(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.sendMessage("exitGame",null)];case 1:return t.sent(),[2]}})})},t.prototype.sendMessage=function(t,e){return new Promise(function(i,o){var n={};n.data=e,n.resolve=i,n.reject=o;var r=new CustomEvent(t,{detail:n});window.parent.document.dispatchEvent(r)})},t.prototype.StartGame=function(t){var e=new a.RevMsg;return e.BankCard[0]=new r.CardValue,e.BankCard[0].point=Math.ceil(11*Math.random()+1),e.BankCard[0].suit=r.CardsSuit.null,e.BankCard[1]=new r.CardValue,e.BankCard[1].point=Math.ceil(11*Math.random()+1),e.BankCard[1].suit=r.CardsSuit.heart,e.PlayCard[0]=new r.CardValue,e.PlayCard[0].point=Math.ceil(11*Math.random()+1),e.PlayCard[0].suit=r.CardsSuit.heart,e.PlayCard[1]=new r.CardValue,e.PlayCard[1].point=Math.ceil(11*Math.random()+1),e.PlayCard[1].suit=r.CardsSuit.heart,e},t.prototype.BankerFillCard=function(t){var e=new r.CardValue;return e.point=Math.ceil(11*Math.random()+1),e.suit=r.CardsSuit.heart,e},t.prototype.ShowBankerCard=function(){var t=new r.CardValue;return t.point=1,t.suit=r.CardsSuit.heart,t},t.prototype.UserStand=function(t){},t.prototype.UserSplit=function(t){var e=new r.CardValue;return e.point=11,e.suit=r.CardsSuit.heart,e},t.prototype.UserHit=function(t){var e=new r.CardValue;return e.point=Math.ceil(11*Math.random()+1),e.suit=r.CardsSuit.heart,e},t.prototype.UserDouble=function(){var t=new r.CardValue;return t.point=Math.ceil(11*Math.random()+1),t.suit=r.CardsSuit.heart,t},t.prototype.UserSurrender=function(){},t.prototype.UserInsurance=function(t){return t/2},t.prototype.GetHistoryResult=function(){var t=new s.BJHistoryMsg,e=new r.CardValue;e.point=0,e.suit=r.CardsSuit.heart,t.BankCard.push(e),t.BankCard.push(e),t.BankCard.push(e),t.BankPoint=18,t.InsuranceBenefit=10;var i=new s.BJHistoryCarValue;i.CardGroup.push(e),i.CardGroup.push(e),i.CardGroup.push(e),i.CardGroupPoint=18,i.WinScore=100,t.PlayCard.push(i),t.PlayCard.push(i),t.PlayCard.push(i),t.Date="2018/9/19 12:01:59",t.BetSum=100,t.WinScoreSum=1e4;var o=new s.BJHistoryMsg;o.BankCard.push(e),o.BankCard.push(e),o.BankCard.push(e),o.BankPoint=18,o.PlayCard.push(i),o.PlayCard.push(i),o.Date="2018/9/19 12:01:59",o.BetSum=100,o.WinScoreSum=1e4,o.InsuranceBenefit=10;var n=new s.BJHistoryMsg;n.BankCard.push(e),n.BankCard.push(e),n.BankCard.push(e),n.BankPoint=18,n.PlayCard.push(i),n.PlayCard.push(i),n.PlayCard.push(i),n.PlayCard.push(i),n.Date="2018/9/19 12:01:59",n.BetSum=100,n.WinScoreSum=1e4,n.InsuranceBenefit=0;var a=[];return a.push(t),a.push(o),a.push(n),a},t}();i.default=c,cc._RF.pop()},{"../../Public/scripts/Card":"Card","../../baccarat/scripts/Baccarat":"Baccarat","./BlackJackHistoryList":"BlackJackHistoryList"}],BlackJack:[function(t,e,i){"use strict";cc._RF.push(e,"9ad2eVCW1ZN5LywTgivy6kw","BlackJack");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./BlackJackNetManager"),a=t("../../../Script/LanguageManager"),s=t("./BlackJackCardGroup"),c=t("../../baccarat/scripts/Baccarat"),l=t("./BlackJackHistory"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.top=null,e.Bottom=null,e.score=null,e.bets=null,e.ControlCardsPoint=null,e.ControlCardsStop=null,e.BankerCardsPoint=null,e.BankerCardsStop=null,e.LastBet=null,e.Start=null,e.Replenish=null,e.Stop=null,e.Double=null,e.Again=null,e.Insure=null,e.Split=null,e.Surrender=null,e.History=null,e.historyNode=null,e.betArea=null,e.idlestate=null,e.playState=null,e.betSprite=[],e.betButton=[],e.IdleChipImage=null,e.chipSpriteFrame=null,e.PlayerCardGroup=null,e.BankerCardGroup=null,e.CardPrefab=null,e._myScore=0,e._monetarySymbol=null,e._thisBetsValue=0,e._lastBetsValue=0,e._tableBets=[],e._witchWin=c.whichWin.Bank,e._betValue=[1,10,100,500,1e3],e._controlCradGroup=null,e._SplitCardGroup=[],e._isBuyInsurance=!1,e}return o(e,t),Object.defineProperty(e.prototype,"MyScore",{get:function(){return this._myScore},set:function(t){this._myScore=t,this.setScore()},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=cc.winSize;t.height/t.width>1.7?(this.node.getComponent(cc.Canvas).fitHeight=!1,this.node.getComponent(cc.Canvas).fitWidth=!0):(this.node.getComponent(cc.Canvas).fitHeight=!0,this.node.getComponent(cc.Canvas).fitWidth=!1),this.Bottom.width=t.width,this.top.width=t.width},e.prototype.start=function(){this.getMonetarySymbol(),this.updateScore(),this.setScore(),this.bets.string="0",this.Start.interactable=!1,this.clearTableBets(),this.checkChipActive(),this.idlestate.active=!0,this.LastBet.node.active=!0,this.playState.active=!1,this.PlayerCardGroup.CardGroupIdentity=s.CardGroupIdentity.Player,this.BankerCardGroup.CardGroupIdentity=s.CardGroupIdentity.Banker,this.BankerCardsPoint.active=!1,this.BankerCardsStop.opacity=0,this.ControlCardsPoint.node.parent.active=!0,this.ControlCardsStop.opacity=0,this._controlCradGroup=this.PlayerCardGroup,this.LastBet.interactable=!1,this.Start.interactable=!1,this.Again.interactable=!1,a.default.instance.switchLanguage(!1)},e.prototype.rand=function(t,e){return Math.floor(Math.random()*(t-e+1)+e)},e.prototype.back=function(){this.historyNode.active?(this.historyNode.active=!1,this.historyNode.getComponent(l.default).clear(),this.History.interactable=!0):r.default.instance.exitGame().then(function(){})},e.prototype.getMonetarySymbol=function(){this._monetarySymbol=r.default.instance.getMonetarySymbol()},e.prototype.updateScore=function(){this._myScore=r.default.instance.getScore()},e.prototype.setScore=function(){this.score.string=this._monetarySymbol+this._myScore},e.prototype.addWinScore=function(t){var e=this._myScore;this._myScore+=t;var i=10;this.schedule(function(){--i>0?e+=Math.floor(t/10):e=this._myScore,this.score.string=this._monetarySymbol+e},.05,i-1)},e.prototype.chipIn=function(t,e){console.log(" betIndex ",e),this._thisBetsValue+this._betValue[e]>this._myScore||(this._thisBetsValue+=this._betValue[e],this.bets.string=this._thisBetsValue.toString(),this.Start.interactable=!0,this.moveBetToTable(e),this.checkChipActive(this._thisBetsValue))},e.prototype.moveBetToTable=function(t){var e=this,i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=this.betSprite[t],i.position=this.betButton[t].node.parent.position.add(this.betButton[t].node.position),this.idlestate.addChild(i),this._tableBets.push(i);var o=cc.moveBy(.3,this.IdleChipImage.parent.position.add(this.IdleChipImage.position).sub(i.parent.position.add(i.position))),n=cc.scaleTo(.3,.5),r=cc.fadeOut(0),a=cc.callFunc(function(){e.IdleChipImage.getComponent(cc.Sprite).spriteFrame=e.betSprite[t],e.IdleChipImage.setScale(.5);var i=e._controlCradGroup.node.getChildByName("Bet").getChildByName("chip_1");i.getComponent(cc.Sprite).spriteFrame=e.IdleChipImage.getComponent(cc.Sprite).spriteFrame,i.setScale(.5)});i.runAction(cc.sequence(cc.spawn(o,n),r,a))},e.prototype.onStartGameUselastChip=function(){this.checkScoreEnough(this._lastBetsValue)&&(this._thisBetsValue=this._lastBetsValue,this.onStartGame())},e.prototype.onStartGame=function(){var t=this;if(0!=this._thisBetsValue){this.MyScore-=this._thisBetsValue;var e=r.default.instance.StartGame(this._thisBetsValue);console.log("start game",e),this.GetCardByCardGroup(e.BankCard[0],this.BankerCardGroup,!1),this.GetCardByCardGroup(e.PlayCard[0],this._controlCradGroup),this.scheduleOnce(function(){t.GetCardByCardGroup(e.BankCard[1],t.BankerCardGroup),t.GetCardByCardGroup(e.PlayCard[1],t._controlCradGroup),t._controlCradGroup.CardGroupState==s.CardGroupState.BlackJack&&t.onStop()},.25),this.checkButtonState(e),this._controlCradGroup.Bet=this._thisBetsValue,this.clearTableBets(),this.idlestate.active=!1,this.LastBet.node.active=!1,this.playState.active=!0,this.Replenish.interactable=!1,this.scheduleOnce(function(){t.Replenish.interactable=!0},.5),a.default.instance.switchLanguage(!1)}},e.prototype.onCancel=function(){this._thisBetsValue=0,this.IdleChipImage.getComponent(cc.Sprite).spriteFrame=this.chipSpriteFrame,this.IdleChipImage.setScale(.5),this.bets.string=this._thisBetsValue.toString(),this.Start.interactable=!1,this.clearTableBets(),this.checkChipActive()},e.prototype.onReplenish=function(){var t=this;this.GetCardByCardGroup(r.default.instance.UserHit(this._controlCradGroup.CardGroupIdentity),this._controlCradGroup),this.Double.interactable=!1,this.Split.interactable=!1,this.Replenish.interactable=!1,this.scheduleOnce(function(){t.movePointAndStopImage(),t.Replenish.interactable=!0,t._controlCradGroup.ValueSum>=21&&t.onStop()},.5)},e.prototype.CardGroupMoveTo=function(t,e,i,o){var n=cc.moveTo(.5,e),r=cc.scaleTo(5,i);t.node.runAction(n),t.CardsNode.runAction(r),t.node.getChildByName("Bet").runAction(cc.scaleTo(.5,o))},e.prototype.onStop=function(){var t=this;if(r.default.instance.UserStand(this._controlCradGroup.CardGroupIdentity),this._controlCradGroup.IsStop=!0,this.Split.interactable=!1,this.Stop.interactable=!1,this.checkAllPlayerCardGroupStop())return this.BankerCardGroup.ShowFirstCardAndValueSum(),this.showResult(this._controlCradGroup,this._SplitCardGroup),void(this.ControlCardsStop.opacity=255);if(this._SplitCardGroup.length<=0)this.showResult(this._controlCradGroup);else{this._controlCradGroup.showStop(),this.CardGroupMoveTo(this._controlCradGroup,this._SplitCardGroup[0].node.getPosition(),.49,.72);for(var e=0;e<this._SplitCardGroup.length-1;e++)this._SplitCardGroup[e].node.runAction(cc.moveBy(.5,new cc.Vec2(230,0)));this.CardGroupMoveTo(this._SplitCardGroup[this._SplitCardGroup.length-1],this._controlCradGroup.node.getPosition(),.87,1),this._SplitCardGroup.unshift(this._controlCradGroup),this._controlCradGroup.node.getComponent(cc.Mask).enabled=!0,this._controlCradGroup=this._SplitCardGroup[this._SplitCardGroup.length-1],this.ControlCardsPoint.string=this._controlCradGroup.ValueSum.toString(),this._controlCradGroup.node.setSiblingIndex(this._controlCradGroup.node.parent.childrenCount),this._SplitCardGroup.pop(),this.Split.interactable=!(this._SplitCardGroup.length>=3)&&this._controlCradGroup.CheckCardsIsPair(),this.movePointAndStopImage()}this.scheduleOnce(function(){t.Stop.interactable=!0},.5)},e.prototype.checkAllPlayerCardGroupStop=function(){if(!this._controlCradGroup.IsStop)return!1;for(var t=0;t<this._SplitCardGroup.length;t++)if(!this._SplitCardGroup[t].IsStop)return!1;return!0},e.prototype.showResult=function(t,e){var i=this;void 0===e&&(e=[]),this.Stop.node.parent.active=!1;var o=function(){if(i.BankerCardGroup.ValueSum<17){i.GetCardByCardGroup(r.default.instance.BankerFillCard(i.BankerCardGroup.CardGroupIdentity),i.BankerCardGroup);i.BankerCardGroup.getCardGroup();i.scheduleOnce(function(){},.1)}else{i.judgeCardGroupResult(t);for(var n=0;n<e.length;n++)i.judgeCardGroupResult(e[n]);i.unschedule(o)}};this.scheduleOnce(function(){console.log(" schedule once called");var n=!0;for(var r in e)if(e[r].CardGroupState!=s.CardGroupState.Bust){n=!1;break}if(1==n&&t.CardGroupState==s.CardGroupState.Bust){i.judgeWichCardGroupState(c.whichWin.Bank,t);for(r=0;r<e.length;r++)i.judgeCardGroupResult(e[r])}else i.schedule(o,1);if(i._isBuyInsurance&&i.BankerCardGroup.CardGroupState==s.CardGroupState.BlackJack){var a=i._controlCradGroup.Bet/2*3;i.MyScore+=a,i._isBuyInsurance=!1}},1)},e.prototype.judgeCardGroupResult=function(t){t.CardGroupState==s.CardGroupState.BlackJack&&this.BankerCardGroup.CardGroupState!=s.CardGroupState.BlackJack?this.judgeWichCardGroupState(c.whichWin.Play,t):t.CardGroupState!=s.CardGroupState.BlackJack&&this.BankerCardGroup.CardGroupState==s.CardGroupState.BlackJack?this.judgeWichCardGroupState(c.whichWin.Bank,t):t.CardGroupState==s.CardGroupState.Bust&&this.BankerCardGroup.CardGroupState==s.CardGroupState.Bust?this.judgeWichCardGroupState(c.whichWin.Tie,t):t.CardGroupState==s.CardGroupState.Bust?this.judgeWichCardGroupState(c.whichWin.Bank,t):this.BankerCardGroup.CardGroupState==s.CardGroupState.Bust?this.judgeWichCardGroupState(c.whichWin.Play,t):this.BankerCardGroup.ValueSum==t.ValueSum?this.judgeWichCardGroupState(c.whichWin.Tie,t):t.ValueSum>this.BankerCardGroup.ValueSum?this.judgeWichCardGroupState(c.whichWin.Play,t):t.ValueSum<this.BankerCardGroup.ValueSum&&this.judgeWichCardGroupState(c.whichWin.Bank,t)},e.prototype.judgeWichCardGroupState=function(t,e){switch(t){case c.whichWin.Bank:this._witchWin=c.whichWin.Bank,this.moveLoseChip(e);break;case c.whichWin.Play:this._witchWin=c.whichWin.Play;var i=0;i=this._controlCradGroup.CardGroupState==s.CardGroupState.BlackJack?this._controlCradGroup.Bet+1.5*this._controlCradGroup.Bet:2*this._controlCradGroup.Bet,this.moveWinChip(e,i);break;case c.whichWin.Tie:this._witchWin=c.whichWin.Tie,this.moveTieChip(e,this._controlCradGroup.Bet)}this.BankerCardGroup.IsStop=!0,this.BankerCardGroup.showStop(),this.Again.node.opacity=255,this.Again.interactable=!0},e.prototype.moveTieChip=function(t,e){var i=this,o=t.node.getChildByName("Bet").getComponentInChildren(cc.Sprite),n=cc.instantiate(o.node);o.spriteFrame=this.chipSpriteFrame,o.node.setScale(.5),t.node.parent.addChild(n);var r=t.node.getPosition().add(t.node.getChildByName("Bet").getPosition());n.setPosition(r.add(o.node.getPosition()));var a=cc.callFunc(function(){i.addWinScore(e),n.destroy()}),s=this.Bottom.getChildByName("Score").x;n.runAction(cc.sequence(cc.moveTo(.3,cc.v2(s+22,-532.5)),a)),t.node.getChildByName("Bet").getComponentInChildren(cc.Label).string="0"},e.prototype.moveWinChip=function(t,e){var i=this,o=t.node.getChildByName("Bet").getComponentInChildren(cc.Sprite),n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=this.chipSpriteFrame,n.parent=t.node.parent,n.setScale(.5*o.node.parent.scale),n.setPosition(0,720);var r=t.node.getPosition().add(t.node.getChildByName("Bet").getPosition()),a=cc.moveTo(.5,cc.v2(r.x+o.node.x*o.node.parent.scale,r.y+o.node.y*o.node.parent.scale)),s=cc.callFunc(function(){t.node.getChildByName("Bet").getComponentInChildren(cc.Label).string=e.toString(),o.spriteFrame=i.chipSpriteFrame,o.node.setScale(.5)}),c=cc.callFunc(function(){t.node.getChildByName("Bet").getComponentInChildren(cc.Label).string="0"}),l=this.Bottom.getChildByName("Score").x,p=cc.moveTo(.3,cc.v2(l+22,-532.5)),u=cc.callFunc(function(){i.addWinScore(e),n.destroy()});n.runAction(cc.sequence(a,s,cc.delayTime(.2),c,p,u))},e.prototype.moveLoseChip=function(t){var e=t.node.getChildByName("Bet").getComponentInChildren(cc.Sprite),i=cc.instantiate(e.node);e.spriteFrame=this.chipSpriteFrame,e.node.setScale(.5),t.node.parent.addChild(i);var o=t.node.getPosition().add(t.node.getChildByName("Bet").getPosition());i.setPosition(o.add(e.node.getPosition()));var n=cc.callFunc(function(){i.destroy()});i.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,720)),n)),t.node.getChildByName("Bet").getComponentInChildren(cc.Label).string="0"},e.prototype.movetCapitulateChip=function(t,e){var i=this,o=t.node.getChildByName("Bet").getComponentInChildren(cc.Sprite),n=cc.instantiate(o.node);o.spriteFrame=this.chipSpriteFrame,o.node.setScale(.5),t.node.parent.addChild(n);var r=t.node.getPosition().add(t.node.getChildByName("Bet").getPosition());n.setPosition(r.add(o.node.getPosition()));var a=cc.callFunc(function(){i.moveTieChip(t,e),n.destroy()});n.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,720)),a)),t.node.getChildByName("Bet").getComponentInChildren(cc.Label).string=e.toString()},e.prototype.onDouble=function(){var t=this;this.GetCardByCardGroup(r.default.instance.UserDouble(),this._controlCradGroup),this.MyScore-=this._controlCradGroup.Bet,this._controlCradGroup.Bet*=2,this.Double.interactable=!1,this.Split.interactable=!1,this.scheduleOnce(function(){t.onStop(),t.movePointAndStopImage()},.5)},e.prototype.onInsure=function(){this.MyScore-=r.default.instance.UserInsurance(this._controlCradGroup.Bet),this._isBuyInsurance=!0,this.Insure.interactable=!1},e.prototype.onSurrender=function(){var t=this;r.default.instance.UserSurrender(),this.movetCapitulateChip(this._controlCradGroup,this._controlCradGroup.Bet/2),this.scheduleOnce(function(){t.onAgain()},1.2)},e.prototype.onSplit=function(){var t=this;this.MyScore-=this._thisBetsValue,this.Split.interactable=!1,this.Double.interactable=!1,this.Stop.interactable=!1,this.Replenish.interactable=!1,this.Surrender.interactable=!1;var e=cc.instantiate(this._controlCradGroup.node).getComponent(s.default);if(e.node.zIndex=-1,e.InitializeCardGroup(this._controlCradGroup.getCardGroup()),e.RemoveFirstCard(),this._controlCradGroup.RemoveLastCard(),this._controlCradGroup.node.parent.addChild(e.node),this._controlCradGroup.CardsNode.runAction(cc.scaleTo(.5,.87)),this._SplitCardGroup.length>0)for(var i=0;i<this._SplitCardGroup.length;i++)this._SplitCardGroup[i].node.runAction(cc.moveBy(.5,new cc.Vec2(-115*this._SplitCardGroup.length/this._SplitCardGroup.length,0)));this._SplitCardGroup.push(e),e.Bet=this._controlCradGroup.Bet,e.CardGroupState=this._controlCradGroup.CardGroupState,e.ValueSum=this._controlCradGroup.ValueSum,e.CardGroupIdentity=this._controlCradGroup.CardGroupIdentity+this._SplitCardGroup.length,e.RegardAAs11(0==e.getCardGroup()[0].CardValue.point),this.CardGroupMoveTo(e,cc.v2(115*(this._SplitCardGroup.length-1),280),.49,.72),this.scheduleOnce(function(){t.GetCardByCardGroup(r.default.instance.UserSplit(e.CardGroupIdentity),e),t.GetCardByCardGroup(r.default.instance.UserSplit(t._controlCradGroup.CardGroupIdentity),t._controlCradGroup),t.Replenish.interactable=!0,t.Stop.interactable=!0},1),this.scheduleOnce(function(){t.Split.interactable=!(t._SplitCardGroup.length>=3)&&t._controlCradGroup.CheckCardsIsPair()},1.5)},e.prototype.onAgain=function(){this._lastBetsValue=this._thisBetsValue,this._thisBetsValue=0,this.ControlCardsStop.opacity=0,this.idlestate.active=!0,this.LastBet.node.active=!1,this.playState.active=!1,this.Again.node.opacity=0,this.Again.interactable=!1,this.Double.interactable=!0,this.Surrender.interactable=!0,this.Stop.interactable=!0,this.Stop.node.parent.active=!0,this.Start.interactable=!1,this.checkChipActive();for(var t=0;t<this._SplitCardGroup.length;t++)this._SplitCardGroup[t].node.destroy();this._SplitCardGroup=[],this._controlCradGroup.CardGroupIdentity=s.CardGroupIdentity.Player,this._controlCradGroup.ClearCardGroup(),this._controlCradGroup.CardsNode.scale=1,this.BankerCardGroup.ClearCardGroup(),this.bets.string="0",this.IdleChipImage.getComponent(cc.Sprite).spriteFrame=this.chipSpriteFrame,this.checkScoreEnough(this._lastBetsValue)?this.LastBet.interactable=!0:this.LastBet.interactable=!1},e.prototype.showHistory=function(){this.History.interactable=!1,this.historyNode.active=!0,this.historyNode.getComponent(l.default).setHistorys(),a.default.instance.switchLanguage(!1)},e.prototype.clearTableBets=function(){for(var t in this._tableBets)this.idlestate.removeChild(this._tableBets[t]);this._tableBets=[]},e.prototype.checkButtonState=function(t){this.checkScoreEnough(this._thisBetsValue)?this.Double.interactable=!0:this.Double.interactable=!1,0==t.BankCard[1].point&&this.checkScoreEnough(this._thisBetsValue/2)?this.Insure.interactable=!0:this.Insure.interactable=!1,t.PlayCard[0].point==t.PlayCard[1].point&&this.checkScoreEnough(this._thisBetsValue)?this.Split.interactable=!0:this.Split.interactable=!1},e.prototype.checkScoreEnough=function(t){return!(this.MyScore<t)},e.prototype.movePointAndStopImage=function(){var t=this._controlCradGroup.getCardGroup();t[t.length-1]&&console.log("his.ControlCardsStop",this.ControlCardsStop)},e.prototype.checkChipActive=function(t){void 0===t&&(t=0);for(var e=this.betButton.length-1;e>=0;e--)this._myScore-t<this._betValue[e]?this.betButton[e].interactable=!1:this.betButton[e].interactable=!0},e.prototype.GetCardByCardGroup=function(t,e,i){void 0===i&&(i=!0);var o=cc.instantiate(this.CardPrefab).getComponent("Card");console.log("backcardsize",o.backCard.node.getContentSize()+"card"+o.backCard.node.scale),console.log("maincardSize",o.mainCard.node.getContentSize()+"card"+o.mainCard.node.scale),o.setCardValue(t),e.GetCard(o,i,this._SplitCardGroup.length>0),this.ControlCardsPoint.string=this._controlCradGroup.ValueSum.toString()},e.prototype.switchLanguage=function(){a.default.instance.switchLanguage()},n([h(cc.Node)],e.prototype,"top",void 0),n([h(cc.Node)],e.prototype,"Bottom",void 0),n([h(cc.Label)],e.prototype,"score",void 0),n([h(cc.Label)],e.prototype,"bets",void 0),n([h(cc.Label)],e.prototype,"ControlCardsPoint",void 0),n([h(cc.Node)],e.prototype,"ControlCardsStop",void 0),n([h(cc.Node)],e.prototype,"BankerCardsPoint",void 0),n([h(cc.Node)],e.prototype,"BankerCardsStop",void 0),n([h(cc.Button)],e.prototype,"LastBet",void 0),n([h(cc.Button)],e.prototype,"Start",void 0),n([h(cc.Button)],e.prototype,"Replenish",void 0),n([h(cc.Button)],e.prototype,"Stop",void 0),n([h(cc.Button)],e.prototype,"Double",void 0),n([h(cc.Button)],e.prototype,"Again",void 0),n([h(cc.Button)],e.prototype,"Insure",void 0),n([h(cc.Button)],e.prototype,"Split",void 0),n([h(cc.Button)],e.prototype,"Surrender",void 0),n([h(cc.Button)],e.prototype,"History",void 0),n([h(cc.Node)],e.prototype,"historyNode",void 0),n([h(cc.Node)],e.prototype,"betArea",void 0),n([h(cc.Node)],e.prototype,"idlestate",void 0),n([h(cc.Node)],e.prototype,"playState",void 0),n([h(cc.SpriteFrame)],e.prototype,"betSprite",void 0),n([h(cc.Button)],e.prototype,"betButton",void 0),n([h(cc.Node)],e.prototype,"IdleChipImage",void 0),n([h(cc.SpriteFrame)],e.prototype,"chipSpriteFrame",void 0),n([h(s.default)],e.prototype,"PlayerCardGroup",void 0),n([h(s.default)],e.prototype,"BankerCardGroup",void 0),n([h(cc.Prefab)],e.prototype,"CardPrefab",void 0),e=n([u],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../Script/LanguageManager":"LanguageManager","../../baccarat/scripts/Baccarat":"Baccarat","./BlackJackCardGroup":"BlackJackCardGroup","./BlackJackHistory":"BlackJackHistory","./BlackJackNetManager":"BlackJackNetManager"}],CardGroup:[function(t,e,i){"use strict";cc._RF.push(e,"3b2cc/AEiNK6rvXtGwGLNTB","CardGroup");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardGroup=[],e.valueSum=0,e.regardAAs11=!1,e.bet=0,e}return o(e,t),Object.defineProperty(e.prototype,"Bet",{get:function(){return this.bet},set:function(t){this.bet=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RegardAAs11",{get:function(){return this.regardAAs11},set:function(t){this.regardAAs11=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ValueSum",{get:function(){return this.valueSum},set:function(t){this.valueSum=t,this.getComponentInChildren(cc.Label).string=this.valueSum.toString()},enumerable:!0,configurable:!0}),e.prototype.AddCardToCardGroup=function(t){this.cardGroup.push(t)},e.prototype.GetCardByIndex=function(t){return this.cardGroup[t]},e.prototype.GetCardGroupLength=function(){return this.cardGroup.length},e=n([a],e)}(cc.Component));i.CardGroup=s,cc._RF.pop()},{}],CardOLD:[function(t,e,i){"use strict";cc._RF.push(e,"da5089qffhCS6C8ARI9nHnt","CardOLD");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r,a=cc._decorator,s=a.ccclass,c=a.property,l=function(){return function(){}}();i.CardValue=l,function(t){t[t.heart=0]="heart",t[t.spade=1]="spade",t[t.diamond=2]="diamond",t[t.club=3]="club",t[t.null=4]="null"}(r=i.CardsSuit||(i.CardsSuit={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.front=null,e.back=null,e.point=null,e.suit=null,e.mainPic=null,e.blackNumber=[],e.readNumber=[],e.suitBig=[],e.suitSmall=[],e.cardValue=null,e}return o(e,t),Object.defineProperty(e.prototype,"CardValue",{get:function(){return this.cardValue},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=new l;t.point=1,t.suit=r.diamond},e.prototype.setCardValue=function(t){this.cardValue=t,t.point<0?this.point.spriteFrame=null:t.suit==r.spade||t.suit==r.club?this.point.spriteFrame=this.blackNumber[t.point]:this.point.spriteFrame=this.readNumber[t.point],t.suit!=r.null?(this.suit.spriteFrame=this.suitSmall[t.suit],this.mainPic.spriteFrame=this.suitBig[t.suit]):(this.suit.spriteFrame=null,this.mainPic.spriteFrame=null)},e.prototype.setFaceUp=function(t){this.back.node.active=!t},e.prototype.reveal=function(t){this.setFaceUp(!1);var e=cc.callFunc(function(){this.setFaceUp(!0)},this),i=cc.callFunc(function(){t()},this),o=cc.sequence(cc.scaleTo(.1,0,1),e,cc.scaleTo(.1,1,1),i);this.node.runAction(o)},n([c(cc.Sprite)],e.prototype,"front",void 0),n([c(cc.Sprite)],e.prototype,"back",void 0),n([c(cc.Sprite)],e.prototype,"point",void 0),n([c(cc.Sprite)],e.prototype,"suit",void 0),n([c(cc.Sprite)],e.prototype,"mainPic",void 0),n([c(cc.SpriteFrame)],e.prototype,"blackNumber",void 0),n([c(cc.SpriteFrame)],e.prototype,"readNumber",void 0),n([c(cc.SpriteFrame)],e.prototype,"suitBig",void 0),n([c(cc.SpriteFrame)],e.prototype,"suitSmall",void 0),e=n([s],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],CardsPool:[function(t,e,i){"use strict";cc._RF.push(e,"d7d2c2pFI5CH7IvL5jzH7AT","CardsPool");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../Public/scripts/Card"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardPrefab=null,e.cardsPool=[],e}return o(e,t),Object.defineProperty(e.prototype,"CardsPool",{get:function(){return this.cardsPool},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){for(var t=0;t<52;t++){var e=cc.instantiate(this.cardPrefab),i=new r.CardValue;switch(i.point=t%13,Math.floor(t/13)){case 0:i.suit=r.CardsSuit.heart;break;case 1:i.suit=r.CardsSuit.diamond;break;case 2:i.suit=r.CardsSuit.spade;break;case 3:i.suit=r.CardsSuit.club}e.getComponent(r.default).setCardValue(i),this.cardsPool.push(e)}},e.prototype.getCardAtRandom=function(){var t=Math.floor(Math.random()*this.cardsPool.length),e=this.cardsPool[t];return this.cardsPool.splice(t,1),e},n([c(cc.Prefab)],e.prototype,"cardPrefab",void 0),e=n([s],e)}(cc.Component);i.CardsPool=l,cc._RF.pop()},{"../../Public/scripts/Card":"Card"}],Card:[function(t,e,i){"use strict";cc._RF.push(e,"7476cIEHXpJ4bvws2aOCAAJ","Card");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r,a=cc._decorator,s=a.ccclass,c=a.property,l=function(){function t(){}return t=n([s("SlotAudioClip")],t)}();i.CardValue=l,function(t){t[t.heart=0]="heart",t[t.spade=1]="spade",t[t.diamond=2]="diamond",t[t.club=3]="club",t[t.null=4]="null"}(r=i.CardsSuit||(i.CardsSuit={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainCard=null,e.cardPoint=null,e.backCard=null,e.mainSuit=[],e.backSuit=[],e.cardValue=null,e}return o(e,t),Object.defineProperty(e.prototype,"CardValue",{get:function(){return this.cardValue},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=new l;t.point=1,t.suit=r.diamond},e.prototype.setCardValue=function(t){this.cardValue=t,t.point<0?this.cardPoint.string="0":(t.suit==r.heart?this.mainCard.spriteFrame=this.mainSuit[0]:t.suit==r.spade?this.mainCard.spriteFrame=this.mainSuit[1]:t.suit==r.diamond?this.mainCard.spriteFrame=this.mainSuit[2]:t.suit==r.club&&(this.mainCard.spriteFrame=this.mainSuit[3]),t.point+1==1?this.cardPoint.string="A":t.point+1>10?this.cardPoint.string=(t.point+1)%10==1?"J":(t.point+1)%10==2?"Q":"K":this.cardPoint.string=(t.point+1).toString(),t.suit==r.heart||t.suit==r.diamond?this.cardPoint.node.color=cc.color(172,48,53):this.cardPoint.node.color=cc.color(3,36,68))},e.prototype.setFaceUp=function(t){this.backCard.node.active=!t,console.log("set face up backcardsize",this.backCard.node.getContentSize()+"scale"+this.backCard.node.scale),console.log("set face up maincardSize",this.mainCard.node.getContentSize()+"scale"+this.mainCard.node.scale)},e.prototype.reveal=function(t,e){this.setFaceUp(!1);var i=cc.callFunc(function(){this.setFaceUp(!0)},this),o=cc.callFunc(function(){t()},this),n=cc.sequence(cc.scaleTo(.1,0,1),i,cc.scaleTo(.1,e,e),o);this.node.runAction(n)},e.prototype.scaleBackCard=function(){this.setFaceUp(!1);var t=cc.callFunc(function(){},this),e=cc.sequence(cc.scaleTo(.1,0,1),t,cc.scaleTo(.1,.4,.4));this.node.runAction(e)},n([c(cc.Sprite)],e.prototype,"mainCard",void 0),n([c(cc.Label)],e.prototype,"cardPoint",void 0),n([c(cc.Sprite)],e.prototype,"backCard",void 0),n([c(cc.SpriteFrame)],e.prototype,"mainSuit",void 0),n([c(cc.SpriteFrame)],e.prototype,"backSuit",void 0),e=n([s],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],ChipMove:[function(t,e,i){"use strict";cc._RF.push(e,"9aec65ipaZHlLxtWuV75SwL","ChipMove");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.lateUpdate=function(){this.node.setPositionX(-this.node.parent.width/2-25)},e=n([a],e)}(cc.Component));i.ChipMove=s,cc._RF.pop()},{}],HistoryCardGroup:[function(t,e,i){"use strict";cc._RF.push(e,"104604GhvRBVYFzi4sKlMcy","HistoryCardGroup");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./BlackJackNetManager"),a=t("../../../Script/LanguageManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CardGroup=null,e.CardGroupPoint=null,e.CardGroupWinScore=null,e.cardPrefab=null,e}return o(e,t),e.prototype.setHistoryCardGroup=function(t){this.clearCard(),a.default.instance.language==a.MultiLangType.CN?this.CardGroupPoint.string=t.CardGroupPoint+" \u70b9":this.CardGroupPoint.string=t.CardGroupPoint+" Point",this.CardGroupWinScore.string=r.default.instance.getMonetarySymbol()+t.WinScore;for(var e=0;e<t.CardGroup.length;e++){var i=cc.instantiate(this.cardPrefab);i.getComponent("CardOLD").setCardValue(t.CardGroup[e]),i.scale=.5,this.CardGroup.addChild(i)}},e.prototype.clearCard=function(){this.CardGroup.removeAllChildren()},n([l(cc.Node)],e.prototype,"CardGroup",void 0),n([l(cc.Label)],e.prototype,"CardGroupPoint",void 0),n([l(cc.Label)],e.prototype,"CardGroupWinScore",void 0),n([l(cc.Prefab)],e.prototype,"cardPrefab",void 0),e=n([c],e)}(cc.Component);i.HistoryCardGroup=p,cc._RF.pop()},{"../../../Script/LanguageManager":"LanguageManager","./BlackJackNetManager":"BlackJackNetManager"}],HistoryListDetail:[function(t,e,i){"use strict";cc._RF.push(e,"504ea3eeidJaLFMAF1JmlB1","HistoryListDetail");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./BaccaratNetManager"),a=t("../../Public/scripts/Card"),s=t("../../../Script/LanguageManager"),c=t("./Baccarat"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bankCardGroup=null,e.playCardGroup=null,e.cardPrefab=null,e.bankBet=null,e.playBet=null,e.tieBet=null,e.bankPairBet=null,e.playPairBet=null,e.bankWin=null,e.playWin=null,e.tieWin=null,e.bankPairWin=null,e.playPairWin=null,e.playFairButton=null,e.winnerFlame=[],e.isCryptoFormat=!1,e}return o(e,t),e.prototype.setHistoryListDetail=function(t){switch(s.default.instance.language==s.MultiLangType.EN?this.playFairButton.node.getChildByName("Background").getComponent("Multilingual").switchLanguage(s.MultiLangType.EN):this.playFairButton.node.getChildByName("Background").getComponent(cc.Sprite).getComponent("Multilingual").switchLanguage(s.MultiLangType.CN),this.clearCard(),this.resetWinnerSprite(),this.historyMsgLocal=t,this.formatCurrency(),t.resultWin.whichWin){case c.whichWin.Play:this.winnerFlame[0].node.opacity=255;break;case c.whichWin.Bank:this.winnerFlame[1].node.opacity=255;break;case c.whichWin.Tie:this.winnerFlame[2].node.opacity=255}t.resultWin.isBankerPair&&(this.winnerFlame[4].node.opacity=255),t.resultWin.isPlayerPair&&(this.winnerFlame[3].node.opacity=255);var e,i;for(var o in e=.3*-this.bankCardGroup.getContentSize().width,i=.3*this.playCardGroup.getContentSize().width,t.BankCard){(n=cc.instantiate(this.cardPrefab)).getComponent(a.default).setCardValue(t.BankCard[o]),n.scale=.7,n.setPosition(e+parseInt(o)*n.width*.8,0*this.bankCardGroup.height),this.bankCardGroup.addChild(n)}for(var o in t.PlayCard){var n;(n=cc.instantiate(this.cardPrefab)).getComponent(a.default).setCardValue(t.PlayCard[o]),n.scale=.7,n.setPosition(i-parseInt(o)*n.width*.8,0*this.bankCardGroup.height),this.playCardGroup.addChild(n)}},e.prototype.clearCard=function(){this.bankCardGroup.removeAllChildren(),this.playCardGroup.removeAllChildren()},e.prototype.launchProvablyFair=function(){var t="https://whatsonchain.com/tx/"+this.historyMsgLocal.txid;console.log("Provably Fair launching url",t),r.default.instance.launchURL(t)},e.prototype.resetWinnerSprite=function(){for(var t in this.winnerFlame)this.winnerFlame[t].node.opacity=0},e.prototype.toogleCurrancyType=function(t,e){r.default.instance.getMonetarySymbol(),parseInt(e);this.formatCurrency()},e.prototype.formatCurrency=function(){var t=r.default.instance.getMonetarySymbol();this.isCryptoFormat=!this.isCryptoFormat,this.isCryptoFormat?(this.playBet.string=this.historyMsgLocal.PlayBet.toFixed(5)+"BSV",this.playWin.string=this.historyMsgLocal.PlayWin.toFixed(5)+"BSV",this.bankBet.string=this.historyMsgLocal.BankBet.toFixed(5)+"BSV",this.bankWin.string=this.historyMsgLocal.BankWin.toFixed(5)+"BSV",this.tieBet.string=this.historyMsgLocal.TieBet.toFixed(5)+"BSV",this.tieWin.string=this.historyMsgLocal.TieWin.toFixed(5)+"BSV",this.playPairBet.string=this.historyMsgLocal.PlayPairBet.toFixed(5)+"BSV",this.playPairWin.string=this.historyMsgLocal.PlayPairWin.toFixed(5)+"BSV",this.bankPairBet.string=this.historyMsgLocal.BankPairBet.toFixed(5)+"BSV",this.bankPairWin.string=this.historyMsgLocal.BankPairWin.toFixed(5)+"BSV"):(this.playBet.string=t+(this.historyMsgLocal.PlayBet*this.historyMsgLocal.convertToFiat).toFixed(2),this.playWin.string=t+(this.historyMsgLocal.PlayWin*this.historyMsgLocal.convertToFiat).toFixed(2),this.bankBet.string=t+(this.historyMsgLocal.BankBet*this.historyMsgLocal.convertToFiat).toFixed(2),this.bankWin.string=t+(this.historyMsgLocal.BankWin*this.historyMsgLocal.convertToFiat).toFixed(2),this.tieBet.string=t+(this.historyMsgLocal.TieBet*this.historyMsgLocal.convertToFiat).toFixed(2),this.tieWin.string=t+(this.historyMsgLocal.TieWin*this.historyMsgLocal.convertToFiat).toFixed(2),this.playPairBet.string=t+(this.historyMsgLocal.PlayPairBet*this.historyMsgLocal.convertToFiat).toFixed(2),this.playPairWin.string=t+(this.historyMsgLocal.PlayPairWin*this.historyMsgLocal.convertToFiat).toFixed(2),this.bankPairBet.string=t+(this.historyMsgLocal.BankPairBet*this.historyMsgLocal.convertToFiat).toFixed(2),this.bankPairWin.string=t+(this.historyMsgLocal.BankPairWin*this.historyMsgLocal.convertToFiat).toFixed(2)),this.node.parent.getComponent("HistoryList").FormatCurrencyInHeader(this.isCryptoFormat)},n([u(cc.Node)],e.prototype,"bankCardGroup",void 0),n([u(cc.Node)],e.prototype,"playCardGroup",void 0),n([u(cc.Prefab)],e.prototype,"cardPrefab",void 0),n([u(cc.Label)],e.prototype,"bankBet",void 0),n([u(cc.Label)],e.prototype,"playBet",void 0),n([u(cc.Label)],e.prototype,"tieBet",void 0),n([u(cc.Label)],e.prototype,"bankPairBet",void 0),n([u(cc.Label)],e.prototype,"playPairBet",void 0),n([u(cc.Label)],e.prototype,"bankWin",void 0),n([u(cc.Label)],e.prototype,"playWin",void 0),n([u(cc.Label)],e.prototype,"tieWin",void 0),n([u(cc.Label)],e.prototype,"bankPairWin",void 0),n([u(cc.Label)],e.prototype,"playPairWin",void 0),n([u(cc.Button)],e.prototype,"playFairButton",void 0),n([u(cc.Sprite)],e.prototype,"winnerFlame",void 0),e=n([p],e)}(cc.Component);i.HistoryListDetail=h,cc._RF.pop()},{"../../../Script/LanguageManager":"LanguageManager","../../Public/scripts/Card":"Card","./Baccarat":"Baccarat","./BaccaratNetManager":"BaccaratNetManager"}],HistoryList:[function(t,e,i){"use strict";cc._RF.push(e,"f52fehA/dBM9YZwNnYvFrue","HistoryList");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./Baccarat"),a=t("./BaccaratNetManager"),s=t("../../../Script/LanguageManager"),c=t("./HistoryListDetail"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(){return function(){this.BankCard=[],this.PlayCard=[],this.PlayWin=null,this.BankWin=null,this.PlayPairWin=null,this.TieWin=null,this.BankPairWin=null,this.PlayBet=null,this.BankBet=null,this.PlayPairBet=null,this.TieBet=null,this.BankPairBet=null,this.Date=null,this.PendingStatus=!0}}();i.HistoryMsg=h;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.detail=null,e.betScore=null,e.winScore=null,e.date=null,e.resultSprite=null,e.buttonSprite=null,e.buttonSpriteFrame=[],e.resultSpriteFrame=[],e.resultSpriteFrameCN=[],e.pandingLabel=null,e.playerPair=null,e.bankerPair=null,e.sprite_Bet=null,e.sprite_Win=null,e.handId=null,e._moveOpen=!1,e._isContentSizeMove=!1,e._detailCloseY=0,e._detailOpenY=45,e._thisNodeCloseH=0,e._thisNodeOpenH=0,e._dropDownTime=.5,e._historyMsg=null,e._isSetHistoryMsg=!1,e}return o(e,t),e.prototype.onLoad=function(){this._detailCloseY=this.detail.y,this._detailOpenY=this._detailCloseY-this.detail.getContentSize().height,this._thisNodeCloseH=this.node.getContentSize().height,this._thisNodeOpenH=this.detail.getContentSize().height+this._thisNodeCloseH},e.prototype.update=function(t){if(this._isContentSizeMove){var e=this._thisNodeOpenH/(this._dropDownTime/t);this._moveOpen?this.node.getContentSize().height<=this._thisNodeOpenH-e?this.node.setContentSize(this.node.getContentSize().width,this.node.getContentSize().height+e):this.node.getContentSize().height<this._thisNodeOpenH&&(this.node.setContentSize(this.node.getContentSize().width,this._thisNodeOpenH),this._isContentSizeMove=!1):this.node.getContentSize().height>=this._thisNodeCloseH+e?this.node.setContentSize(this.node.getContentSize().width,this.node.getContentSize().height-e):this.node.getContentSize().height>this._thisNodeCloseH&&(this.node.setContentSize(this.node.getContentSize().width,this._thisNodeCloseH),this._isContentSizeMove=!1)}},e.prototype.show=function(){this._historyMsg.PendingStatus||(this._isSetHistoryMsg||(this._isSetHistoryMsg=!0),this._moveOpen=!this._moveOpen,this._isContentSizeMove=!0,this.detail.stopAllActions(),this._moveOpen&&this.detail.runAction(cc.moveTo(this._dropDownTime-.15,cc.v2(this.detail.x,this._detailOpenY))))},e.prototype.setHistoryMsg=function(t){if(this._historyMsg=t,s.default.instance.language==s.MultiLangType.EN){if(this._historyMsg.PendingStatus)this.resultSprite.spriteFrame=this.resultSpriteFrame[5],this.pandingLabel.string="PENDING...",this.sprite_Bet.node.opacity=200,this.sprite_Win.node.opacity=200,this.handId.node.opacity=200;else{var e=null;switch(this._historyMsg.resultWin.whichWin){case r.whichWin.Bank:e=this.resultSpriteFrame[1];break;case r.whichWin.Play:e=this.resultSpriteFrame[0];break;case r.whichWin.Tie:e=this.resultSpriteFrame[2]}this._historyMsg.resultWin.isPlayerPair&&(this.playerPair.active=!0),this._historyMsg.resultWin.isBankerPair&&(this.bankerPair.active=!0),this.resultSprite.spriteFrame=e}this.sprite_Bet.getComponent("Multilingual").switchLanguage(s.MultiLangType.EN),this.sprite_Win.getComponent("Multilingual").switchLanguage(s.MultiLangType.EN),this.handId.getComponent("Multilingual").switchLanguage(s.MultiLangType.EN)}else{if(this._historyMsg.PendingStatus)this.pandingLabel.string="\u5f85\u5b9a";else{e=null;switch(this._historyMsg.resultWin.whichWin){case r.whichWin.Bank:e=this.resultSpriteFrameCN[1];break;case r.whichWin.Play:e=this.resultSpriteFrameCN[0];break;case r.whichWin.Tie:e=this.resultSpriteFrameCN[2]}this._historyMsg.resultWin.isPlayerPair&&(this.playerPair.active=!0),this._historyMsg.resultWin.isBankerPair&&(this.bankerPair.active=!0),this.resultSprite.spriteFrame=e}this.sprite_Bet.getComponent("Multilingual").switchLanguage(s.MultiLangType.CN),this.sprite_Win.getComponent("Multilingual").switchLanguage(s.MultiLangType.CN),this.handId.getComponent("Multilingual").switchLanguage(s.MultiLangType.CN)}a.default.instance.getMonetarySymbol();this._historyMsg.PendingStatus||(this.betScore.string=(this._historyMsg.BankBet+this._historyMsg.PlayBet+this._historyMsg.TieBet+this._historyMsg.PlayPairBet+this._historyMsg.BankPairBet).toFixed(5)+"BSV"),this._historyMsg.PendingStatus||(this.winScore.string=(this._historyMsg.BankWin+this._historyMsg.PlayWin+this._historyMsg.TieWin+this._historyMsg.PlayPairWin+this._historyMsg.BankPairWin).toFixed(5)+"BSV"),this._historyMsg.PendingStatus?this.date.string="":this.date.string=this._historyMsg.Date,this._historyMsg.PendingStatus?(this.sprite_Bet.node.opacity=0,this.sprite_Win.node.opacity=0,this.handId.node.opacity=0,this.pandingLabel.node.active=!0):this.detail.getComponent(c.HistoryListDetail).setHistoryListDetail(this._historyMsg),this.buttonSprite.spriteFrame=this.buttonSpriteFrame[this._historyMsg.PendingStatus||this._historyMsg.resultDelay?1:0]},e.prototype.changeButtonColor=function(t){this.buttonSprite.spriteFrame=this.buttonSpriteFrame[t]},e.prototype.toThousands=function(t){for(var e="",i=0,o=(t=(t||0).toString()).length-1;o>=0;o--)i++,e=t.charAt(o)+e,i%3||0==o||(e=","+e);return e},e.prototype.FormatCurrencyInHeader=function(t){if(t)this.betScore.string=(this._historyMsg.BankBet+this._historyMsg.PlayBet+this._historyMsg.TieBet+this._historyMsg.PlayPairBet+this._historyMsg.BankPairBet).toFixed(5)+"BSV",this.winScore.string=this.winScore.string=(this._historyMsg.BankWin+this._historyMsg.PlayWin+this._historyMsg.TieWin+this._historyMsg.PlayPairWin+this._historyMsg.BankPairWin).toFixed(5)+"BSV";else{var e=a.default.instance.getMonetarySymbol();this.betScore.string=e+((this._historyMsg.BankBet+this._historyMsg.PlayBet+this._historyMsg.TieBet+this._historyMsg.PlayPairBet+this._historyMsg.BankPairBet)*this._historyMsg.convertToFiat).toFixed(2),this.winScore.string=e+((this._historyMsg.BankWin+this._historyMsg.PlayWin+this._historyMsg.TieWin+this._historyMsg.PlayPairWin+this._historyMsg.BankPairWin)*this._historyMsg.convertToFiat).toFixed(2)}},n([u(cc.Node)],e.prototype,"detail",void 0),n([u(cc.Label)],e.prototype,"betScore",void 0),n([u(cc.Label)],e.prototype,"winScore",void 0),n([u(cc.Label)],e.prototype,"date",void 0),n([u(cc.Sprite)],e.prototype,"resultSprite",void 0),n([u(cc.Sprite)],e.prototype,"buttonSprite",void 0),n([u(cc.SpriteFrame)],e.prototype,"buttonSpriteFrame",void 0),n([u(cc.SpriteFrame)],e.prototype,"resultSpriteFrame",void 0),n([u(cc.SpriteFrame)],e.prototype,"resultSpriteFrameCN",void 0),n([u(cc.Label)],e.prototype,"pandingLabel",void 0),n([u(cc.Node)],e.prototype,"playerPair",void 0),n([u(cc.Node)],e.prototype,"bankerPair",void 0),n([u(cc.Sprite)],e.prototype,"sprite_Bet",void 0),n([u(cc.Sprite)],e.prototype,"sprite_Win",void 0),n([u(cc.Sprite)],e.prototype,"handId",void 0),e=n([p],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../Script/LanguageManager":"LanguageManager","./Baccarat":"Baccarat","./BaccaratNetManager":"BaccaratNetManager","./HistoryListDetail":"HistoryListDetail"}],History:[function(t,e,i){"use strict";cc._RF.push(e,"b6c55wuou5EtYPsOyCddZ4p","History");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./HistoryList"),a=t("./BaccaratNetManager"),s=t("./Baccarat"),c=t("../../../Script/LanguageManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollviewContent=null,e.historyList=null,e.scrollView=null,e.view=null,e.bar=null,e.historyBackSprite=null,e.overLay1=null,e.overLay2=null,e._space=135,e.historyMsg=[],e.historyListPool=null,e}return o(e,t),e.prototype.onLoad=function(){this.historyListPool=new cc.NodePool;this.historyBackSprite.getComponent("Multilingual").switchLanguage(c.MultiLangType.EN);for(var t=0;t<21;++t){var e=cc.instantiate(this.historyList);this.historyListPool.put(e)}},e.prototype.start=function(){var t=cc.winSize;this.scrollView.node.setContentSize(this.scrollView.node.getContentSize().width,t.height-this._space),this.bar.setPosition(cc.v2(-1,this.bar.parent.height/2-this.bar.height)),this.scrollView.node.on("scroll-began",this.onScrollBegan,this),this.scrollView.node.on("scroll-ended",this.onScrollEnded,this)},e.prototype.update=function(){},e.prototype.instantiateHistoryList=function(t,e){void 0===e&&(e=!1);var i=null,o=(i=this.historyListPool.size()>0?this.historyListPool.get():cc.instantiate(this.historyList)).getComponent(r.default);o.setHistoryMsg(this.historyMsg[t]);var n=-1;if(this.historyMsg[t].PendingStatus||this.historyMsg[t].resultDelay)n=1;else switch(this.historyMsg[t].resultWin.whichWin){case s.whichWin.Bank:case s.whichWin.Play:case s.whichWin.Tie:n=0}o.getComponent(r.default).changeButtonColor(n),this.scrollviewContent.addChild(i)},e.prototype.setHistorys=function(t){var e=this;this.scrollView.scrollToPercentVertical(1),a.default.instance.getHistoryForUI().then(function(i){console.log("data has been recieved from the client"),e.historyMsg=i;for(var o=0;o<e.historyMsg.length;o++)e.instantiateHistoryList(o);e.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(t.removeActivityIndicator,t)))})},e.prototype.clear=function(){this.scrollviewContent.removeAllChildren()},e.prototype.onScrollBegan=function(){this.overLay1.active=!0,this.overLay2.active=!0},e.prototype.onScrollEnded=function(){this.overLay1.active=!1,this.overLay2.active=!1},n([u(cc.Node)],e.prototype,"scrollviewContent",void 0),n([u(cc.Prefab)],e.prototype,"historyList",void 0),n([u(cc.ScrollView)],e.prototype,"scrollView",void 0),n([u(cc.Node)],e.prototype,"view",void 0),n([u(cc.Node)],e.prototype,"bar",void 0),n([u(cc.Sprite)],e.prototype,"historyBackSprite",void 0),n([u(cc.Node)],e.prototype,"overLay1",void 0),n([u(cc.Node)],e.prototype,"overLay2",void 0),e=n([p],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../../../Script/LanguageManager":"LanguageManager","./Baccarat":"Baccarat","./BaccaratNetManager":"BaccaratNetManager","./HistoryList":"HistoryList"}],LanguageFrames:[function(t,e,i){"use strict";cc._RF.push(e,"79709PuV45OK53GJPChWfeH","LanguageFrames");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.english_table=null,e.chinise_table=null,e.japanese_table=null,e.english_title=null,e.chinise_title=null,e.japanese_title=null,e}return o(e,t),e.prototype.onLoad=function(){this.setFrameData()},e.prototype.start=function(){},e.prototype.setFrameData=function(){this.spriteFrame={English:{table:this.english_table,title:this.english_title},Chinese:{table:this.chinise_table,title:this.english_title},Japanese:{table:this.japanese_table,title:this.japanese_title}}},n([s(cc.SpriteFrame)],e.prototype,"english_table",void 0),n([s(cc.SpriteFrame)],e.prototype,"chinise_table",void 0),n([s(cc.SpriteFrame)],e.prototype,"japanese_table",void 0),n([s(cc.SpriteFrame)],e.prototype,"english_title",void 0),n([s(cc.SpriteFrame)],e.prototype,"chinise_title",void 0),n([s(cc.SpriteFrame)],e.prototype,"japanese_title",void 0),e=n([a],e)}(cc.Component);i.default=c,cc._RF.pop()},{}],LanguageManager:[function(t,e,i){"use strict";var o;cc._RF.push(e,"502339idkpARKKHGtUMcqos","LanguageManager"),Object.defineProperty(i,"__esModule",{value:!0}),function(t){t[t.EN=0]="EN",t[t.CN=1]="CN"}(o=i.MultiLangType||(i.MultiLangType={}));var n=function(){function t(){this._Multilinguals=[],this.language=o.EN,this.configData=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.setLanguageFromCode=function(t){for(var e in this.language="zh-cn"==t||"zh-hk"==t?o.CN:o.EN,this._Multilinguals)this._Multilinguals[e].switchLanguage(this.language%2)},t.prototype.switchLanguage=function(t){for(var e in void 0===t&&(t=!0),t&&(this.language==o.EN?this.language=o.CN:this.language=o.EN),this._Multilinguals)this._Multilinguals[e].switchLanguage(this.language%2)},t.prototype.registerMultilingual=function(t){this._Multilinguals.push(t)},t.prototype.loadConfig=function(){var t=this;return new Promise(function(e,i){t.configData?e(t.configData):cc.loader.loadRes("config/LanguageConfig",function(o,n){o&&(i(o),cc.error("LanguageConfig err:"+o)),t.configData=n,e(n)})})},t}();i.default=n,cc._RF.pop()},{}],LocalisedNode:[function(t,e,i){"use strict";cc._RF.push(e,"0436b1v88xKIraGF7tYdAyA","LocalisedNode");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./TranslatedText"),a=t("./LanguageFrames"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deal=null,e.lastBet=null,e.plceYourBet=null,e.insurance=null,e.surrender=null,e.split=null,e.standButton=null,e.hit=null,e.double=null,e.nextGame=null,e.standText=null,e.table=null,e.header=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.updateLanguage=function(){this.updateText(),this.updateSprite()},e.prototype.updateText=function(){var t=r.default.TextTranslation[localStorage.getItem("Language")];this.deal.string=t.deal,this.lastBet.string=t.lastBet,this.plceYourBet.string=t.plceYourBet,this.insurance.string=t.insurance,this.surrender.string=t.surrender,this.split.string=t.split,this.standButton.string=t.standButton,this.hit.string=t.hit,this.double.string=t.double,this.nextGame.string=t.nextGame},e.prototype.updateSprite=function(){var t=this.node.getComponent(a.default).spriteFrame[localStorage.getItem("Language")];this.table.spriteFrame=t.table,this.header.spriteFrame=t.title},n([l(cc.Label)],e.prototype,"deal",void 0),n([l(cc.Label)],e.prototype,"lastBet",void 0),n([l(cc.Label)],e.prototype,"plceYourBet",void 0),n([l(cc.Label)],e.prototype,"insurance",void 0),n([l(cc.Label)],e.prototype,"surrender",void 0),n([l(cc.Label)],e.prototype,"split",void 0),n([l(cc.Label)],e.prototype,"standButton",void 0),n([l(cc.Label)],e.prototype,"hit",void 0),n([l(cc.Label)],e.prototype,"double",void 0),n([l(cc.Label)],e.prototype,"nextGame",void 0),n([l(cc.Label)],e.prototype,"standText",void 0),n([l(cc.Sprite)],e.prototype,"table",void 0),n([l(cc.Sprite)],e.prototype,"header",void 0),e=n([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./LanguageFrames":"LanguageFrames","./TranslatedText":"TranslatedText"}],Menu:[function(t,e,i){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Menu");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./LanguageManager"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){cc.director.preloadScene("Baccarat");var t=cc.winSize;t.height/t.width>1.7?(this.node.getComponent(cc.Canvas).fitHeight=!1,this.node.getComponent(cc.Canvas).fitWidth=!0):(this.node.getComponent(cc.Canvas).fitHeight=!0,this.node.getComponent(cc.Canvas).fitWidth=!1)},e.prototype.start=function(){r.default.instance.loadConfig(),r.default.instance.switchLanguage(!1),cc.director.loadScene("Baccarat")},e.prototype.loadBlackJackScene=function(){},e.prototype.loadBaccaratScene=function(){},e=n([s],e)}(cc.Component));i.default=c,cc._RF.pop()},{"./LanguageManager":"LanguageManager"}],Multilingual:[function(t,e,i){"use strict";cc._RF.push(e,"e33d2sN/gZIE42LU4hifa1f","Multilingual");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./LanguageManager"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=null,e.buttonEN=[],e.buttonCN=[],e.sprite=null,e.SpriteEN=null,e.SpriteCN=null,e.label=null,e.configData=null,e}return o(e,t),e.prototype.onLoad=function(){r.default.instance.registerMultilingual(this),this.configData=r.default.instance.loadConfig()},e.prototype.switchLanguage=function(t){var e=this;if(this.button)switch(t){case r.MultiLangType.CN:this.setButtonSprite(this.buttonCN);break;case r.MultiLangType.EN:this.setButtonSprite(this.buttonEN)}else if(this.sprite)switch(t){case r.MultiLangType.CN:this.setSprite(this.SpriteCN);break;case r.MultiLangType.EN:this.setSprite(this.SpriteEN)}else if(this.label)switch(t){case r.MultiLangType.CN:this.configData.then(function(t){t.CN[e.label.string]&&(e.label.string=t.CN[e.label.string])});break;case r.MultiLangType.EN:this.configData.then(function(t){t.EN[e.label.string]&&(e.label.string=t.EN[e.label.string])})}else;},e.prototype.setButtonSprite=function(t){t[0]&&(this.button.normalSprite=t[0],this.button.pressedSprite=t[1]||t[0],this.button.hoverSprite=t[2]||t[0],this.button.disabledSprite=t[3]||t[0])},e.prototype.setSprite=function(t){this.sprite.spriteFrame=t},n([c(cc.Button)],e.prototype,"button",void 0),n([c([cc.SpriteFrame])],e.prototype,"buttonEN",void 0),n([c([cc.SpriteFrame])],e.prototype,"buttonCN",void 0),n([c(cc.Sprite)],e.prototype,"sprite",void 0),n([c(cc.SpriteFrame)],e.prototype,"SpriteEN",void 0),n([c(cc.SpriteFrame)],e.prototype,"SpriteCN",void 0),n([c(cc.Label)],e.prototype,"label",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"./LanguageManager":"LanguageManager"}],PS1Point:[function(t,e,i){"use strict";cc._RF.push(e,"176dbgPkIlFWZRm+6RNtRos","PS1Point");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../scripts/Baccarat"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bankNode=null,e.playNode=null,e.tieNode=null,e.bankPairNode=null,e.playPairNode=null,e.scoreNode=null,e}return o(e,t),e.prototype.onLoad=function(){this.reSet()},e.prototype.start=function(){},e.prototype.reSet=function(){this.bankNode.active=!1,this.playNode.active=!1,this.tieNode.active=!1,this.bankPairNode.active=!1,this.playPairNode.active=!1},e.prototype.setValue=function(t){switch(t.whichWin){case r.whichWin.Bank:this.bankNode.active=!0;break;case r.whichWin.Play:this.playNode.active=!0;break;case r.whichWin.Tie:this.tieNode.active=!0}t.isBankerPair&&(this.bankPairNode.active=!0),t.isPlayerPair&&(this.playPairNode.active=!0),this.tieNode.activeInHierarchy?this.scoreNode.getComponent(cc.Label).string="":this.scoreNode.getComponent(cc.Label).string=t.score.toString()},n([c(cc.Node)],e.prototype,"bankNode",void 0),n([c(cc.Node)],e.prototype,"playNode",void 0),n([c(cc.Node)],e.prototype,"tieNode",void 0),n([c(cc.Node)],e.prototype,"bankPairNode",void 0),n([c(cc.Node)],e.prototype,"playPairNode",void 0),n([c(cc.Node)],e.prototype,"scoreNode",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"../../scripts/Baccarat":"Baccarat"}],PS2Point:[function(t,e,i){"use strict";cc._RF.push(e,"68591RshP1FZrce7sJltXW6","PS2Point");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../scripts/Baccarat"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bankNode=null,e.playNode=null,e.tieNode=null,e.value=null,e}return o(e,t),e.prototype.onLoad=function(){this.reSet()},e.prototype.start=function(){},e.prototype.reSet=function(){this.bankNode.active=!1,this.playNode.active=!1,this.tieNode.active=!1,this.tieNode.getComponent(cc.Label).string="0"},e.prototype.setValue=function(t){switch(t.whichWin){case r.whichWin.Bank:this.bankNode.active=!0,this.value=t.whichWin;break;case r.whichWin.Play:this.playNode.active=!0,this.value=t.whichWin;break;case r.whichWin.Tie:this.tieNode.active=!0,null==this.value&&(this.value=t.whichWin);var e=Number(this.tieNode.getComponent(cc.Label).string)+1;this.tieNode.getComponent(cc.Label).string=e.toString()}},n([c(cc.Node)],e.prototype,"bankNode",void 0),n([c(cc.Node)],e.prototype,"playNode",void 0),n([c(cc.Node)],e.prototype,"tieNode",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"../../scripts/Baccarat":"Baccarat"}],PS3downPoint:[function(t,e,i){"use strict";cc._RF.push(e,"27a1fSmT9RBr63Ndq1n2TaV","PS3downPoint");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../scripts/Baccarat"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bankNode=null,e.playNode=null,e.value=null,e}return o(e,t),e.prototype.onLoad=function(){this.reSet()},e.prototype.start=function(){},e.prototype.reSet=function(){this.bankNode.active=!1,this.playNode.active=!1},e.prototype.setValue=function(t){switch(t){case r.whichWin.Bank:this.bankNode.active=!0,this.value=t;break;case r.whichWin.Play:this.playNode.active=!0,this.value=t}},n([c(cc.Node)],e.prototype,"bankNode",void 0),n([c(cc.Node)],e.prototype,"playNode",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"../../scripts/Baccarat":"Baccarat"}],PalaceStation1:[function(t,e,i){"use strict";cc._RF.push(e,"1777frkyupNqpAAXziOVvgQ","PalaceStation1");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./PS1Point"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PS1Point=null,e._startPos=null,e._endPos=null,e._colSpacing=0,e._rowSpacing=0,e._col=20,e._row=7,e._pointLength=0,e}return o(e,t),e.prototype.start=function(){},e.prototype.addPalaceStation=function(t){this._pointLength>=this._col*this._row&&this.moveToLeft(),this._startPos=cc.v2(.465*-this.node.getContentSize().width,.4*this.node.getContentSize().height),this._endPos=cc.v2(.43*this.node.getContentSize().width,.3*-this.node.getContentSize().height),this._colSpacing=(this._endPos.x-this._startPos.x)/(this._col-1),this._rowSpacing=(this._startPos.y-this._endPos.y)/(this._row-1);var e=cc.instantiate(this.PS1Point);this.node.addChild(e),e.setPosition(this.getPointPos()),e.getComponent(r.default).setValue(t)},e.prototype.getPointPos=function(){var t=this._pointLength%this._row,e=Math.floor(this._pointLength/this._row),i=new cc.Vec2;return i.x=this._startPos.x+e*this._colSpacing,i.y=this._startPos.y-t*this._rowSpacing,this._pointLength++,i},e.prototype.moveToLeft=function(){this.node.removeAllChildren(),this._pointLength=0},n([c(cc.Prefab)],e.prototype,"PS1Point",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"./PS1Point":"PS1Point"}],PalaceStation2:[function(t,e,i){"use strict";cc._RF.push(e,"6e899Ivc8NCTqU6Ac/JQXcW","PalaceStation2");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../scripts/Baccarat"),a=t("./PS2Point"),s=t("./PalaceStation3down"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PS2Point=null,e.palaceStation3=null,e._startPos=cc.v2(-295,77.5),e._endPos=cc.v2(294,-77.5),e._col=20,e._row=6,e._lastResult=null,e._lastPointPos=null,e._colSpacing=(e._endPos.x-e._startPos.x)/(e._col-1),e._rowSpacing=(e._startPos.y-e._endPos.y)/(e._row-1),e._psChart=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],e}return o(e,t),e.prototype.start=function(){},e.prototype.addPalaceStation=function(t){if(this._lastPointPos){if(t.whichWin==r.whichWin.Tie)return void this.node.children[this.node.children.length-1].getComponent(a.default).setValue(t);if(this._lastResult.whichWin==t.whichWin){if(this._lastPointPos.y>=this._row-1)return;this._lastPointPos.y++}else this._lastPointPos.y=0,this._lastPointPos.x++}else this._lastPointPos=cc.v2(0,0);this._lastResult=t;var e=cc.instantiate(this.PS2Point);if(this.node.addChild(e),e.setPosition(this.getPointPos(this._lastPointPos)),e.getComponent(a.default).setValue(t),this._lastPointPos.x>=this._col){for(var i=0;i<this._psChart[0].length;++i)this.node.removeChild(this._psChart[0][i]);this._psChart[0]=[];for(i=1;i<this._psChart.length;++i){for(var o=0;o<this._psChart[i].length&&this._psChart[i][o];++o)this._psChart[i][o].setPositionX(this._psChart[i][o].x-this._colSpacing),this._psChart[i-1][o]=this._psChart[i][o];this._psChart[i]=[]}this._lastPointPos.x=this._col-1,this._psChart[this._lastPointPos.x][this._lastPointPos.y]=e,e.setPosition(this.getPointPos(this._lastPointPos))}else this._psChart[this._lastPointPos.x][this._lastPointPos.y]=e;this.addPS3down()},e.prototype.getPointPos=function(t){var e=t.y,i=t.x,o=new cc.Vec2;return o.x=this._startPos.x+i*this._colSpacing,o.y=this._startPos.y-e*this._rowSpacing,o},e.prototype.addPS3down=function(){var t,e=this._lastPointPos.y,i=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];if(this._psChart[0][0].getComponent(a.default).value==r.whichWin.Tie){for(var o=1;o<this._psChart.length;++o)i[o-1]=this._psChart[o];t=this._lastPointPos.x-1}else i=this._psChart,t=this._lastPointPos.x;0==t||0==e&&1==t||(0==e?(t>=2&&(i[t-1].length==i[t-2].length?this.palaceStation3.addPalaceStation(r.whichWin.Bank,s.PSDown.way1):this.palaceStation3.addPalaceStation(r.whichWin.Play,s.PSDown.way1)),t>=3&&(i[t-1].length==i[t-3].length?this.palaceStation3.addPalaceStation(r.whichWin.Bank,s.PSDown.way2):this.palaceStation3.addPalaceStation(r.whichWin.Play,s.PSDown.way2)),t>=4&&(i[t-1].length==i[t-4].length?this.palaceStation3.addPalaceStation(r.whichWin.Bank,s.PSDown.way3):this.palaceStation3.addPalaceStation(r.whichWin.Play,s.PSDown.way3))):(t>=1&&(i[t-1][e]||!i[t-1][e-1]?this.palaceStation3.addPalaceStation(r.whichWin.Bank,s.PSDown.way1):this.palaceStation3.addPalaceStation(r.whichWin.Play,s.PSDown.way1)),t>=2&&(i[t-2][e]||!i[t-2][e-1]?this.palaceStation3.addPalaceStation(r.whichWin.Bank,s.PSDown.way2):this.palaceStation3.addPalaceStation(r.whichWin.Play,s.PSDown.way2)),t>=3&&(i[t-3][e]||!i[t-3][e-1]?this.palaceStation3.addPalaceStation(r.whichWin.Bank,s.PSDown.way3):this.palaceStation3.addPalaceStation(r.whichWin.Play,s.PSDown.way3))))},n([p(cc.v2refab)],e.prototype,"PS2Point",void 0),n([p(s.default)],e.prototype,"palaceStation3",void 0),e=n([l],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../scripts/Baccarat":"Baccarat","./PS2Point":"PS2Point","./PalaceStation3down":"PalaceStation3down"}],PalaceStation3down:[function(t,e,i){"use strict";cc._RF.push(e,"9954fH5qUlBf4LpBaJTv0zH","PalaceStation3down");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("./PS3downPoint"),s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.way1=0]="way1",t[t.way2=1]="way2",t[t.way3=2]="way3"})(r=i.PSDown||(i.PSDown={}));var p=function(){function t(){this.PS3downPoint=null,this.startPos=null,this.endPos=null,this.col=0,this.row=0,this.colSpacing=0,this.rowSpacing=0,this.lastPointPos=null,this.lastResult=null,this.psChart=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]}return t.prototype.initialization=function(t){this.colSpacing=(this.endPos.x-this.startPos.x)/(this.col-1),this.rowSpacing=(this.startPos.y-this.endPos.y)/(this.row-1),t==r.way1?this.psChart=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]:this.psChart=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]},t.prototype.getPointPos=function(t){var e=t.y,i=t.x,o=new cc.Vec2;return o.x=this.startPos.x+i*this.colSpacing,o.y=this.startPos.y-e*this.rowSpacing,o},n([l(cc.v2refab)],t.prototype,"PS3downPoint",void 0),n([l(cc.Vec2)],t.prototype,"startPos",void 0),n([l(cc.Vec2)],t.prototype,"endPos",void 0),n([l(Number)],t.prototype,"col",void 0),n([l(Number)],t.prototype,"row",void 0),t=n([c("PalaceStation3")],t)}();i.PSDownThree=p;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.palaceStation3=[],e}return o(e,t),e.prototype.onLoad=function(){this.palaceStation3[r.way1].initialization(r.way1),this.palaceStation3[r.way2].initialization(r.way2),this.palaceStation3[r.way3].initialization(r.way3)},e.prototype.start=function(){},e.prototype.addPalaceStation=function(t,e){if(this.palaceStation3[e].lastPointPos)if(this.palaceStation3[e].lastResult==t){if(this.palaceStation3[e].lastPointPos.y>=this.palaceStation3[e].row-1)return;this.palaceStation3[e].lastPointPos.y++}else this.palaceStation3[e].lastPointPos.y=0,this.palaceStation3[e].lastPointPos.x++;else this.palaceStation3[e].lastPointPos=cc.v2(0,0);this.palaceStation3[e].lastResult=t;var i=cc.instantiate(this.palaceStation3[e].PS3downPoint);if(this.node.addChild(i),i.setPosition(this.palaceStation3[e].getPointPos(this.palaceStation3[e].lastPointPos)),i.getComponent(a.default).setValue(t),this.palaceStation3[e].lastPointPos.x>=this.palaceStation3[e].col){for(var o=0;o<this.palaceStation3[e].psChart[0].length;++o)this.node.removeChild(this.palaceStation3[e].psChart[0][o]);this.palaceStation3[e].psChart[0]=[];for(o=1;o<this.palaceStation3[e].psChart.length;++o){for(var n=0;n<this.palaceStation3[e].psChart[o].length&&this.palaceStation3[e].psChart[o][n];++n)this.palaceStation3[e].psChart[o][n].setPositionX(this.palaceStation3[e].psChart[o][n].x-this.palaceStation3[e].colSpacing),this.palaceStation3[e].psChart[o-1][n]=this.palaceStation3[e].psChart[o][n];this.palaceStation3[e].psChart[o]=[]}this.palaceStation3[e].lastPointPos.x=this.palaceStation3[e].col-1,this.palaceStation3[e].psChart[this.palaceStation3[e].lastPointPos.x][this.palaceStation3[e].lastPointPos.y]=i,i.setPosition(this.palaceStation3[e].getPointPos(this.palaceStation3[e].lastPointPos))}else this.palaceStation3[e].psChart[this.palaceStation3[e].lastPointPos.x][this.palaceStation3[e].lastPointPos.y]=i},n([l(p)],e.prototype,"palaceStation3",void 0),e=n([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"./PS3downPoint":"PS3downPoint"}],PalaceStation:[function(t,e,i){"use strict";cc._RF.push(e,"029cfzjVwlC94dDGn7bl0rI","PalaceStation");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../scripts/Baccarat"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollview=null,e.gameNumber=null,e.bankNumber=null,e.playNumber=null,e.tieNumber=null,e.BankPairNumberNumber=null,e.playPairNumberNumber=null,e.dropDownMask=null,e._isDropDown=!1,e}return o(e,t),e.prototype.start=function(){},e.prototype.dropDown=function(){this._isDropDown?(this.scrollview.runAction(cc.moveBy(.5,cc.v2(0,this.scrollview.getContentSize().height-40))),this.scrollview.getComponent(cc.ScrollView).vertical=!1,this.dropDownMask.active=!1):(this.scrollview.runAction(cc.moveBy(.5,cc.v2(0,40-this.scrollview.getContentSize().height))),this.scrollview.getComponent(cc.ScrollView).vertical=!0,this.dropDownMask.active=!0),this._isDropDown=!this._isDropDown},e.prototype.addPalaceStation=function(t){switch(this.gameNumber.string=(Number(this.gameNumber.string)+1).toString(),t.whichWin){case r.whichWin.Bank:this.bankNumber.string=(Number(this.bankNumber.string)+1).toString();break;case r.whichWin.Play:this.playNumber.string=(Number(this.playNumber.string)+1).toString();break;case r.whichWin.Tie:this.tieNumber.string=(Number(this.tieNumber.string)+1).toString()}t.isBankerPair&&(this.BankPairNumberNumber.string=(Number(this.BankPairNumberNumber.string)+1).toString()),t.isPlayerPair&&(this.playPairNumberNumber.string=(Number(this.playPairNumberNumber.string)+1).toString())},e.prototype.packUp=function(){this._isDropDown&&(console.log("dropDown",this._isDropDown),this.scrollview.runAction(cc.moveBy(.5,cc.v2(0,this.scrollview.getContentSize().height-40))),this.dropDownMask.active=!1,this._isDropDown=!this._isDropDown)},n([c(cc.Node)],e.prototype,"scrollview",void 0),n([c(cc.Label)],e.prototype,"gameNumber",void 0),n([c(cc.Label)],e.prototype,"bankNumber",void 0),n([c(cc.Label)],e.prototype,"playNumber",void 0),n([c(cc.Label)],e.prototype,"tieNumber",void 0),n([c(cc.Label)],e.prototype,"BankPairNumberNumber",void 0),n([c(cc.Label)],e.prototype,"playPairNumberNumber",void 0),n([c(cc.Node)],e.prototype,"dropDownMask",void 0),e=n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{"../../scripts/Baccarat":"Baccarat"}],TranslatedText:[function(t,e,i){"use strict";cc._RF.push(e,"59caaOATJ5P27OrugUrxWp5","TranslatedText"),Object.defineProperty(i,"__esModule",{value:!0});i.default={TextTranslation:{English:{deal:"DEAL",previousBet:"PREVIOUS BET",split:"SPLIT",double:"DOUBLE",hit:"HIT",stand:"STAND",surrender:"SURRENDER",insurance:"INSURANCE",cancel:"CANCEL",history:"HISTORY",bust:"BUST",place_bet:"PLACE YOUR BET"},Japanese:{deal:"\u5bfe\u51e6",previousBet:"\u524d\u306e\u30d9\u30c3\u30c8",split:"\u30b9\u30d7\u30ea\u30c3\u30c8",double:"\u30c0\u30d6\u30eb",hit:"\u30d2\u30c3\u30c8",stand:"\u30b9\u30bf\u30f3\u30c9",surrender:"\u964d\u4f0f",insurance:"\u30a4\u30f3\u30b7\u30e5\u30a2\u30e9\u30f3\u30b9",cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",history:"\u6b74\u53f2",bust:"\u30d0\u30b9\u30c8",place_bet:"\u3042\u306a\u305f\u3092\u7f6e\u304d\u307e\u3059 \u30d9\u30c3\u30c8"},Chinese:{deal:"\u4ea4\u6613",previousBet:"\u5148\u524d\u7684\u6295\u6ce8",split:"\u5206\u88c2",double:"\u53cc",hit:"\u51fb\u4e2d",surrender:"\u6295\u964d",insurance:"\u4fdd\u9669",cancel:"\u53d6\u6d88",history:"\u5386\u53f2",bust:"\u80f8\u56f4",place_bet:"\u653e\u7f6e\u4f60\u7684 \u6253\u8d4c"}}};i.Language={English:"English",Japansese:"Japanese",Chinese:"Chinese"},cc._RF.pop()},{}],WinArea:[function(t,e,i){"use strict";cc._RF.push(e,"99530VhaYdJP5/ewlfVi+qI","WinArea");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(){function t(){this.win=null,this.result=null}return n([s(cc.Node)],t.prototype,"win",void 0),n([s(cc.Node)],t.prototype,"result",void 0),t=n([a("AreaState")],t)}();i.AreaState=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.areaState=[],e}return o(e,t),e.prototype.start=function(){this.reset()},e.prototype.reset=function(){for(var t in this.areaState)this.areaState[t].win.opacity=0,this.areaState[t].result.opacity=0},e.prototype.showWin=function(t){this.areaState[t].win.runAction(cc.fadeIn(.2))},e.prototype.showBets=function(t){this.areaState[t].result.opacity=255},e.prototype.resetWin=function(){for(var t in this.areaState)this.areaState[t].win.opacity=0},n([s(c)],e.prototype,"areaState",void 0),e=n([a],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(t,e,i){"use strict";cc._RF.push(e,"015e5rMDEhNOrsaezdca6NE","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["use_v2.1.x_cc.Action","PS1Point","PS2Point","PS3downPoint","PalaceStation","PalaceStation1","PalaceStation2","PalaceStation3down","AnyButton","Baccarat","BaccaratCardGroup","BaccaratNetManager","BetLimit","BetLimitCell","ChipMove","History","HistoryList","HistoryListDetail","WinArea","BlackJack","BlackJackCardGroup","BlackJackHistory","BlackJackHistoryList","BlackJackNetManager","CardGroup","CardsPool","HistoryCardGroup","LanguageFrames","LocalisedNode","TranslatedText","BacarratCards","Card","CardOLD","LanguageManager","Menu","Multilingual"]);